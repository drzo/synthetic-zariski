\begin{lemma}\label{factorisation-stone-finite}
For any tower of Stone space $(S_k)_{k:\N}$ and $l:\N$, we have that:
\[\left(\mathrm{lim}_kS_k\to \mathrm{Fin}(l)\right) \simeq \mathrm{colim}_k (S_k\to \mathrm{Fin}(l))\]
\end{lemma}

\begin{proof}
We have that:
\[\left(\mathrm{lim}_kS_k\to \mathrm{Fin}(l)\right) \]
\[\simeq \Hom(2^l, \mathrm{colim}_k 2^{S_k})\]
\[\simeq \mathrm{colim}_k \Hom(2^l, 2^{S_k}) \]
\[\simeq \mathrm{colim}_k (S_k\to \mathrm{Fin}(l))\]
Where the third line comes from the fact that $2^l$ is finitely presented.
\end{proof}

\begin{lemma}\label{stonification-sequential-limits}
For any tower of compact Hausdorff space $(C_k)_{k:\N}$ and $l:\N$, we have that:
\[\Spec(2^{\mathrm{lim}_k C_k}) = \mathrm{lim}_k\Spec(2^{C_k})\]
\end{lemma}

\begin{proof}
TODO
\end{proof}

\begin{lemma}
Assume $C$ a compact Hausdorff space and $S$ a stone space. Then the map:
\[C\to \Spec(2^C)\]
induces an equivalence:
\[(\Spec(2^C) \to S) \simeq(C\to S) \]
\end{lemma}

\begin{proof}
First we prove that the map:
\[C\to \Spec(2^C)\]
is surjective. Assume $C$ is the quotient of $S$ Stone, then $2^C$ is a subalgebra of $2^S$ and both are c.p., therefore we by completeness we have an induced surjective map:
\[\Spec(2^S) = S\to C\to \Spec(2^C)\]
so the map:
\[C\to \Spec(2^C)\]
is surjective and the map:
\[(\Spec(2^C) \to S) \to (C\to S) \]
is injective as $S$ is a set. It is surjective as any map $C\to S$ induces a map:
\[\Spec(2^C) \to \Spec(2^S) = S\]
\end{proof}

\begin{lemma}\label{factorisation-compact-hausdorff-finite}
For any tower of compact Hausdorff $(C_k)_{k:\N}$ and $l:\N$, we have that:
\[\left(\mathrm{lim}_kC_k\to \mathrm{Fin}(l)\right) \simeq \mathrm{colim}_k (C_k\to \mathrm{Fin}(l))\]
\end{lemma}

\begin{proof}
By \cref{factorisation-stone-finite} and \cref{stonification-sequential-limits}.
\end{proof}

\begin{lemma}\label{overtly-discrete-union-open}
Assume $(I_i)_{i:\N}$ a tower of overtly discrete types. Then for any $i:\N$ we have that $\mathrm{Im}(I_i)$ is open in $\mathrm{colim}_i I_i$. 
\end{lemma}

\begin{proof}
For $y:\mathrm{colim}_iI_i$, we have that $y\in \mathrm{Im}(I_i)$ is:
\[\exists(x:I_i). x=_{\mathrm{colim}_iI_i}y\]
which is the propositional truncation of an overtly discrete type and therefore overtly discrete.
\end{proof}


\begin{lemma}\label{factorisation-image-true-factorisation}
Assume given $C$ compact Hausdorff and for each $x:C$ a tower:
\[I_0(x)\to I_1(x)\to \cdots\]
of overtly discrete types. Given:
\[f:\prod_{x:S}\mathrm{colim}_i I_i(x)\]
such that there exists $i:\N$ such that $f$ factors through $\mathrm{Im}(I_i)$. Then there exists $j:\N$ such that $f$ factors through $I_j$.
\end{lemma}

\begin{proof}
By local choice there exists a surjective map:
\[p:S\to C\]
with:
\[g:\prod_{x:S} I_i(p(x))\]
such that:
\[\forall(x:S). g(x) =_{\mathrm{colim}_i I_i(x)} f(p(x))\]
Then we have that:
\[\forall(x,y:S). p(x)=p(y) \to g(x) =_{\mathrm{colim}_i I_i(x)} g(y)\]
so that:
\[\forall(x,y:S). p(x)=p(y) \to \exists(i:\N). g(x) =_{\mathrm{colim}_i I_i(x)} g(y)\]
Since $\Sigma(x,y:S). p(x)=p(y)$ is compact Hausdorff we can apply \cref{compact-hausforff-countable-cover} to get a $j:\N$ such that:
\[\forall(x,y:S). p(x)=p(y) \to g(x) =_{I_j(x)} g(y)\]
which gives a factorisation of $f$ through $I_j$.
\end{proof}

\begin{lemma}\label{scott-continuity-right}
Assume given $C$ ompact Hausdorff and for each $x:C$ a tower:
\[I_0(x)\to I_1(x)\to \cdots\]
of overtly discrete types. Then we have that:
\[\prod_{x:C} \mathrm{colim}_{i} I_i(x) = \mathrm{colim}_{i} \prod_{x:C} I_i(x)\]
\end{lemma}

\begin{proof}
Let us check that the canonical map:
\[\mathrm{colim}_i \prod_{x:C} I_i(x) \to \prod_{x:C} \mathrm{colim}_i I_i(x) \]
is an equivalence. 

First we check that it is injective. Given $f,g:\prod_{x:C} I_i(x)$ such that:
\[\forall(x:C).  f(x) =_{\mathrm{colim}_iI_i(x)} g(x)\]
Then we have that:
\[\forall(x:C).  \exists(j:\N). f(x) =_{I_j} g(x)\]
so that by \cref{compact-hausforff-countable-cover} we have that:
\[\exists(j:\N). \forall(x:C). f(x) =_{I_j} g(x)\]
which precisely means that $f=g$ in $\mathrm{colim}_i \prod_{x:C} I_i(x)$.

Now we check that it is surjective. Given a map:
\[f: \prod_{x:C} \mathrm{colim}_i I_i(x)\]
we know that:
\[\forall(x:C). \exists(i:\N). f(x)\in \mathrm{Im}(I_i(x))\]
but $f(x)\in \mathrm{Im}(I_i(x))$ is open by \cref{overtly-discrete-union-open} so that by \cref{compact-hausforff-countable-cover} we have that:
\[\exists(i:\N). \forall(x:C).  f(x)\in \mathrm{Im}(I_i(x))\]
which precisely mean that $f$ factors through $\mathrm{Im}(I_i)$ for some $i$. We conclude by \cref{factorisation-image-true-factorisation}.
\end{proof}

\begin{theorem}[Scott Continuity]\label{scott-continuity}
Assume given $(C_k)_{k:\N}$ a tower of compact Hausdorff spaces and $(I_i)_{i:\N}$ a tower of overtly discrete types. Then:
\[\left( \mathrm{lim}_k C_k \to \mathrm{colim}_i I_i\right) \simeq \mathrm{colim}_{k,i} (C_k\to I_i)\]
\end{theorem}

\begin{proof}
By the non-dependent version of \cref{scott-continuity-right} we just have to prove that for any overtly discrete $I$ we have that:
\[(\mathrm{lim}_kC_k\to I) \simeq \mathrm{colim}_k(C_k\to I)\]
so it is enough to prove that for all towers of finite type we have that:
\[(\mathrm{lim}_kC_k\to \mathrm{colim}_i\mathrm{Fin}(n_i)) \simeq \mathrm{colim}_k(C_k\to \mathrm{colim}_i\mathrm{Fin}(n_i))\]
but we can see that by using \cref{scott-continuity-right} and \cref{factorisation-compact-hausdorff-finite}.
\end{proof}


