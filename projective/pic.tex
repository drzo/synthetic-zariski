 Let $A$ be a commutative {\em connected} ring\footnote{If $e(1-e) = 0$ then $e=0$ or $e=1$.}.

The following result is standard.

 \begin{lemma}\label{stand}
   An invertible element of $A[X,1/X]$ can be written $X^N\Sigma a_nX^n$ with $N$ in $\Z$
   and $a_0$ unit and $a_n$ nilpotent if $n\neq 0$.
 \end{lemma}
 
 Using this Lemma we deduce the following.

\begin{lemma}\label{nilpotent}
  Any invertible element of $A[X,1/X]$ can be written uniquely as a product
  $uX^l(1+a)(1+b)$ with $l$ in $\Z$, $u$ in $A^{\times}$ and $a$ (resp. $b$)
  polynomial in $A[X]$ (resp. $1/XA[1/X]$) with only nilpotent coefficients.
\end{lemma}

\begin{proof}
  Write $\Sigma v_nX^n$ the invertible element of $A[X,1/X]$.
  W.l.o.g. we can assume that the polynomial is of the form $1 + \Sigma v_nX^n$ with
  all $v_n,~n\in \Z$ nilpotent.
  We let $J$ be the ideal generated by these nilpotent elements.
  We have some $N$ such that $J^N = 0$.
  
  We first multiply by the inverse of $1 + \Sigma_{n<0}v_nX^n$, making all coefficients of
  $X^n,~n<0$ in $J^2$.
  We keep doing this until all these elements are $0$.
  %We then do the same, killing all coefficients of $X^n$ for $n>0$.
  We have then written the invertible polynomials on the form $(1+a)(1+b)$.

  Such a decomposition is unique: if we have $(1+a)(1+b)$ in $A^{\times}$ with $a = \Sigma_{n\geqslant 0}a_nX^n$
  and $b = \Sigma_{n<0}b_nX^n$ then we have $a_n = 0$ for $n>0$ and $b_n = 0$ for $n<0$.
\end{proof}

\begin{corollary}\label{Pic1}
  We have $\prod_{L:\bP^1\rightarrow BGL_1}\Sigma_{p:\Z}\|L = O(p)\|$
\end{corollary}

Matthias has noticed that we can deduce from this the following strengthening.

\begin{proposition}\label{Matthias}
  The map $BGL_1\times\Z\rightarrow (\bP^1\rightarrow BGL_1)$
  which associates to $L,p$ the map $x\mapsto L\otimes O(p)(x)$ is an equivalence.
\end{proposition}

\begin{proof}
  Corollary \ref{Pic1} shows that this map is essentially surjective.
  We can then use  Corollary 8.8.2 in \cite{HoTT} to conclude using Proposition \ref{const}.
\end{proof}

 It is a curious remark that $BGL_1\rightarrow BGL_1$ is also equivalent
 to $BGL_1\times Hom(GL_1,GL_1) = BGL_1\times\Z$.


\begin{corollary}\label{Matthias1}
  We have $\prod_{L:\bP^1\rightarrow BGL_1}\prod_{x:R}L([1:x]) = L([0:1])$.
\end{corollary}

\section{Line bundles on $\bP^n$}

We can now reformulate Quillen argument \cite{Quillen} in our setting.

\begin{proposition}\label{trivial}
  If we have $V:\bP^n\rightarrow BGL_1$ we have ${\prod_{s:R^n}V([1:s]) = V([1:0])}$.
\end{proposition}

\begin{proof}
  We define $L:\A^{n-1}\rightarrow BGL_1^{\bP^1}$ by $L~s~[x_0:x_1] = V([x_0:x_1:x_0s])$
  We apply Corollary \ref{Matthias1} and we get
  $$V([1:s]) = L~s~[1:r] = L~s~[1:1] = L~s~[0:1] = V([0:1:0])$$
\end{proof}

\medskip

Let $T$ be the ring of polynomials $u = \Sigma_p u(p)X^p$ with
$X^p = X_0^{p_0}\dots X_n^{p_n}$ with $\Sigma p_i = 0$. We write $T_l$ the subring
of $u$ which contains only monomials $X^p$ with $p_i\geqslant 0$ if $i\neq l$
and $T_{lm}$ the subring of $u$ 
which contains only monomials $X^p$ with $p_i\geqslant 0$ if $i\neq l$ and $i\neq m$.

Note that $T_l$ is the polynomial ring $T_l = R[X_0/X_l,\dots,X_n/X_l]$.

A line bundle on $\bP^n$ is given by compatible line bundle on each $Sp(T_l)$.

By Proposition \ref{trivial}, a line bundle on $\bP^n$ is trivial on each $Sp(T_l)$.
So it is determined by $t_{ij}$ invertible in $T_i[X_i/X_j] = T_j[X_j/X_i] = T_{ij}$
such that $t_{ik} = t_{ij}t_{jk}$ and $t_{ii} = 1$. W.l.o.g we can assume, using Lemma \ref{stand}, that
$t_{ij} = (X_i/X_j)^N u_{ij}$, for some fixed $N$, where $t_{ij}(p)$ is invertible for $p = 0$
and all other coefficients $t_{ij}(p)$ for $p\neq 0$
are nilpotent. The result $\prod(\bP^n) = \Z$ will then follow from the following result.

\begin{proposition}
  There exists $s_i$ invertible in $T_i$ such that $u_{ij} = s_i/s_j$ 
\end{proposition}

\begin{proof}
  (We follow essentially David's argument.)

  Each $u_{ij}$ is such that $u_{ij}(p)$ unit for $p=0$ and
  all $u_{ij}(p)$ nilpotent for $p\neq 0$.

  Like in the proof Lemma \ref{nilpotent}, we can change $u_{01}$ so that
  we have $u_{01}(p) = 0$ if $p_0>0$ or $p_1>0$ by multiplying $u_{01}$ by a unit in $T_0$ and a unit in $T_1$.
  
  We claim then that, in this case, $u_{01}$ has to be a unit. For this we show that $u_{01}(p) = 0$
  if $p_l>0$ for each $l\neq 0,1$.
  This is obtained by looking at the relation $u_{01}= u_{0l}u_{l1}$. Let $L$ is the ideal generated by
  coefficients $u_{0l}(p)$ and $u_{1l}(p)$ with $p_l>0$ and $I$
  the ideal generated of coefficients of all nilpotent coefficients of $u_{0l}$ and $u_{1l}$.
  Thanks to the form of $u_{01}$ we must have $L\subseteq LI$ and so $L=0$ by Nakayma.

  This implies that all coefficients $u_{01}(p)$ such that $p_l>0$ are $0$.

  Since this holds for each $l>1$ we have that $u_{01}$ is a unit in $R$.

  W.l.o.g. we can assume $u_{01}= 1$. We then have $u_{0l} = u_{1l}$ in $T_{0l}\cap T_{1l} = T_l$
  and we take $s_l = u_{0l} = u_{1l}$.
\end{proof}

\begin{corollary}
  $\Pic(\bP^n) = \Z$.
\end{corollary}

We then have the same strengthening as for Proposition \ref{Matthias}.

\begin{theorem}\label{Matthias2}
  The map $BGL_1\times\Z\rightarrow (\bP^n\rightarrow BGL_1)$
  which associates to $L,p$ the map $x\mapsto L\otimes O(p)(x)$ is an equivalence.
\end{theorem}

Following the usual argument, we deduce the characterisation of $\Aut(\bP^n)$, which is a
remarkable result, since the automorphisms are in this framework only bijections of sets.

\begin{corollary}
  $\Aut(\bP^n)$ is $PGL_{n+1}$.
\end{corollary}

\begin{proof}
This follows from Proposition \ref{aut} and Theorem \ref{Matthias2}.
\end{proof}

More generally we can look at maps $\bP^n\rightarrow\bP^m$ using Lemma \ref{hom}.

\begin{corollary}
  A map $\bP^n\rightarrow\bP^m$ is given by $m+1$ homogeneous polynomials $p = (p_0,\dots,p_m)$ on $R^{n+1}$
  of the same   degree $d$ such that $x\neq 0$ implies $p(x)\neq 0$.
\end{corollary}
