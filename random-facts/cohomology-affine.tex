Ingo Blechschmidt and David WÃ¤rn proved the following analogue of
Serre's theorem on affineness

\begin{theorem}
  Let $X$ be a scheme such that $H^1(X,I)=0$,
  for all $I:X\to\Mod{R}_{\mathrm{wqc}}$,
  then $X$ is affine.
\end{theorem}

Here is a consequence:

\begin{corollary}
  Let $X$ be an affine scheme and $Y:X\to \Sch$,
  such that each $Y_x$ is affine.
  Then $(x:X)\times Y_x$ is affine.
\end{corollary}

\begin{proof}
  Let $M:(x:X)\times Y_x\to\Mod{R}_{\mathrm{wqc}}$.
  Then (explanations for the steps below):
  \begin{align*}
    H^1((x:X)\times Y_x,M)&=\propTrunc{((x,y_x):(x:X)\times Y_x)\to K(M_{(x,y_x)},1))}_{\mathrm{set}} \\
                          &=\propTrunc{(x:X)\to ((y_x:Y_x)\to K(M_{(x,y_x)},1))}_{\mathrm{set}} \\
                          &=\propTrunc{(x:X)\to K((y_x:Y_x)\to M_{(x,y_x)},1)}_{\mathrm{set}} \\
                          &=0
  \end{align*}
  The first step, after expanding the definition,
  is just currying.
  To commute the Eilenberg-MacLane space with the dependent function type,
  we use that $Y_x$ is affine and therefore the type $(y_x:Y_x)\to K(M_{(x,y_x)},1)$ is connected.
  It is a delooping of $(y_x:Y_x)\to M_{(x,y_x)}$, so by connectedness,
  it must be equivalent to $K((y_x:Y_x)\to M_{(x,y_x)},1)$.
  The last step uses that $X$ is affine, and $(y_x:Y_x)\to M_{(x,y_x)}$,
  as a scheme-indexed product of weakly quasi-coherent modules, is again weakly quasi-coherent.
  
\end{proof}