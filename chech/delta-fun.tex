TODO: This has to be updated...

Cohomology has the universal property of being a \notion{universal $\partial$-functor}.
In this section, we will construct a tool for proving this in some particular situations,
both for the cohomology defined using Eilenberg-MacLane spaces and \v{C}hech cohomology.

The following definition, from (\cite[2.1]{tohoku-translation}) and originally from (\cite{tohoku1957}), is specialized to our needs.
Grothendieck makes a definition for additive functors from an abelian category to a preadditive category.
We will only need the theory for functors from certain subcategories of dependent $R$-modules over a fixed type to abelian groups.
Also, some arguments are a lot more convenient when we can use elements of modules instead of abstract categorical language.
Therefore, we will state our definitions and results only for this particular situation.

\emph{Let $R$ be a fixed commutative ring and $\mathcal A$ be a subcategory of the category of dependent $R$-modules over a fixed type $X$.}

\begin{definition}
  A \notion{($l$-truncated) $\partial$-Functor} is a collection of functors $T^i:\mathcal A\to \AbGroup$, where $0\leq i < l$ with $l\in\N\cup\{\infty\}$,
  together with a collection of connecting morphisms $\partial_{S,i}$ for any short exact sequence $S$ and $0\leq i\le l$, subject to the following conditions:
  \begin{enumerate}[(a)]
  \item Let $S$ be a short exact sequence
    \[ 0\to A'\to A\to A''\to 0\]
    in $\mathcal A$. Applying the $T^i$ yields a complex, together with connecting morphisms $(\partial_{S,i})_{i\in\N}$:
    \begin{center}
      \begin{tikzcd}
        0\ar[r] & T^0(A')\ar[r] & T^0(A)\ar[r]  & T^0(A'')\ar[r,"\partial_{S,0}"]  & T^1(A')\ar[r]  & T^1(A)\ar[r]  & \dots
      \end{tikzcd}
    \end{center}
  \item For any homomorphism to a second short exact sequence
    \[ 0\to B'\to B\to B''\to 0\]
    and any valid $i$ the corresponding square commutes:
    \begin{center}
      \begin{tikzcd}
        T^i(A'')\ar[r,"\partial"]\ar[d] & T^{i+1}(A')\ar[d] \\
        T^i(B'')\ar[r,"\partial"] & T^{i+1}(B') \\
      \end{tikzcd}
    \end{center}
  \end{enumerate}
\end{definition}

\begin{definition}
  Let $l,k:\N$.
  The $l$-th \notion{truncation} of a $(l+k)$-truncated $\partial$-functor $T$
  is just the restriction of $(T^i)_{i<l+k}$ to $(T^i)_{i<l}$, together with a restriction of the $\partial$-maps
  and we denote the $l$-th truncation with \notion{$T^{\leq l}$}.
\end{definition}

\begin{definition}
  Let $T$ and $T'$ be $\partial$-Functors defined for the same indices.
  
  A \notion{morphism of $\partial$-Functors} $f:T\to T'$ is given by a natural transformation $f^i:T^i\to T'^i$ for each valid $i$,
  such that for any short exact sequence
  \[ 0\to A'\to A\to A''\to 0\]
  the following square commutes:
  \begin{center}
    \begin{tikzcd}
      T^i(A'')\ar[r,"\partial"]\ar[d,"f^i_{A''}"] & T^{i+1}(A')\ar[d,"f^{i+1}_{A'}"] \\
      T'^i(A'')\ar[r,"\partial"] & T'^{i+1}(A') 
    \end{tikzcd}
  \end{center}
\end{definition}

\begin{definition}
  A $\partial$-Functor $T$ is called \notion{exact},
  if all values are exact complexes.
\end{definition}

\begin{definition}
  A $\partial$-Functor $T$ is called \notion{universal}, if for any $T'$, defined for the same indices,
  any natural transformation $f^0:T^0\to T'^0$ extends uniquely to a morphism of $\partial$-Functors $f:T\to T'$.
\end{definition}

To prove that some $\partial$-functor has this universal property,
we will \emph{extend} morphisms of $\partial$-functors, level by level.
By observing the diagram in the proof of the lemma below,
one can see that this is possible using exact sequences with the property,
that some particular element is zero in their middle term.
This is something that could be achieved with injective resolutions classically -- for all elements at once.

\begin{lemma}
  \label{lem:extend-map}
  Let $l\geq i>0$ and $T$ be an exact, $l$-truncated $\partial$-functor, $S=A\to R_\chi\to S_\chi$ a short exact sequence in $\mathcal A$
  and $\chi:T^i(A)$
  \begin{center}
    \begin{tikzcd}
      A\ar[r,"r_\chi"] & R_\chi\ar[r,"s_\chi"] & S_\chi
    \end{tikzcd}
  \end{center}
  such that $T^i(r_\chi)(\chi)=0$.
  For an $l$-truncated $\partial$-functor $T'$
  and any morphism of $(i-1)$-truncated $\partial$-functors $f:T^{\leq (i-1)}\to T'^{\leq (i-1)}$, there is a unique\index{$\mathrm{ext}(\chi,S)$}
  \[\mathrm{ext}(\chi,S) : T'^i(A)\]
  such that for any $x:T^{i-1}(S_\chi)$ with $\partial_{T,S,i-1}(x)=|\chi|$ we have $\partial_{T,S,i-1}(f^{i-1}(x))=\mathrm{ext}(\chi,S)$.
\end{lemma}

\begin{proof}
  The following diagram commutes:
  \begin{center}
    \begin{tikzcd}
      T^{i-1}(A)\ar[r]\ar[d,"f^{i-1}"]  & T^{i-1}(R_\chi)\ar[r]\ar[d,"f^{i-1}"]  & T^{i-1}(S_\chi)\ar[r,"\partial"]\ar[d,"f^{i-1}"] & T^i(A)\ar[r,"r_\chi^\ast"] & T^i(R_\chi)\dots \\
      T'^{i-1}(A)\ar[r]  & T'^{i-1}(R_\chi)\ar[r,"s_\chi^\ast"]  & T'^{i-1}(S_\chi)\ar[r,"\partial"] & T'^i(A)\ar[r] & T'^i(R_\chi)\dots 
    \end{tikzcd}
  \end{center}
  The upper row is exact and the lower row is a complex.

  Let $E(\chi,S)$ be the type of all possible values of $f^i$ in $T'^i(A)$,
  with which the dependent sum over all $y:T'^i(A)$ such that there merely is $x:T^{i-1}(S_\chi)$ with $\partial(x)=|\chi|$
  and $\partial(f^{i-1}(x))=y$.
  Then $E(\chi,S)$ is inhabited, since $r_\chi(|\chi|)=0$ and by exactness, there has to be a mere preimage under $\partial$.
  So we need to show, that $E(\chi,S)$ is a proposition.
  
  Let $x:T^{i-1}(S_\chi)$ such that $\partial(x)=|\chi|$.
  Then any other element with this property will be of the form $x+k$, with $k$ in the kernel of $\partial$.
  Any $k$ like that, has a mere preimage $k':T^{i-1}(R_\chi)$ and since the lower row is a complex, we have $\partial(s_\chi^\ast(f^{i-1}(k')))=0$.
  
  So for any extension $y:T'^{i}(A)$ we have
  \begin{align*}
    y &= \partial(f^{i-1}(x+k)) \\
      &= \partial(f^{i-1}(x))+\partial(f^{i-1}(k)) \\
      &= \partial(f^{i-1}(x))+\partial(s_\chi^\ast(f^{i-1}(k'))) \\
      &= \partial(f^{i-1}(x))
  \end{align*}
  This means we can define $\mathrm{ext}(\chi,S)$ to be the unique element of $E(\chi,S)$.
\end{proof}

While this show, that existence of these special short exact sequences
is enough to extend a \emph{map} from one truncation level to the next,
it is not clear, that an extension constructed in this way,
is actually a morphism of truncated $\partial$-functors.
For that, some ``functoriality'' is needed.

We summarize the exact condition we found useful to prove universality of $\partial$-functors,
together with the existence of enough ``good'' short exact sequences in the following definition.

\begin{definition}
  Let $T$ be a $\partial$-functor.
  We say that $\mathcal A$ \notion{has local resolutions for $T$}, if
  \begin{enumerate}[(i)]
  \item For any $i>0$, $A:\mathcal A$ and $\chi:T^i(A)$ there merely is a short exact sequence:
    \[
      \begin{tikzcd}
        0\ar[r] & A\ar[r,"m_\chi"] & M_\chi\ar[r] & C_\chi\ar[r] & 0
      \end{tikzcd}
    \]
    such that $T^i(m_\chi)(\chi)=0$.
  \item For any sequence $A\to R\to S$ such that $\chi$ also vanishes in $T^i(R)$ and any morphism $f:A\to B$,
    there is a zig--zag of the following shape:
    \begin{center}
      \begin{tikzcd}
        A\ar[r]\ar[d,"f"] & R\ar[r]\ar[d] & S\ar[d] \\
        B\ar[r] & M_{f,K}\ar[r] & C_{f,K} \\
        B\ar[r,"m_{f(\chi)}"]\ar[u,equal] & M_{f(\chi)}\ar[r]\ar[u] & C_{f(\chi)}\ar[u]
      \end{tikzcd}
    \end{center}
  \end{enumerate}
\end{definition}

We will now show, the ``functoriality'' from the last definition is enough to show,
that the extensions constructed in \cref{lem:extend-map} are actually morphisms of $\partial$-functors.

TODO: The lemma has to be updated

\begin{lemma}
  \label{lem:extension-welldefined}
  For any cohomology classes $\chi:(x:X)\to A_{x,k}$, $\xi:(x:X)\to A_{x,k}$ and any morphism
  \begin{center}
    \begin{tikzcd}
      A\ar[r]\ar[d,"\varphi"] & R_{\chi}\ar[r]\ar[d] & C_{\chi}\ar[d] \\
      A'\ar[r] & R_{\xi}\ar[r] & C_{\xi}
    \end{tikzcd}
  \end{center}
  of short exact resolving sequences $S_\chi$ and $S_\xi$ for $\chi$ and $\xi$
  in the sense of \cref{def:morph-resolve}, we have:
  \[ T^k(\varphi)(\mathrm{ext}(\chi,S_\chi)) = \mathrm{ext}(\xi,S_\xi) \]
\end{lemma}

\begin{proof}[of \cref{lem:extension-welldefined}]
  Apply the $\partial$-Functors $H$ and $T$ to the morphism of resolving sequences, to get the following diagram:
  \begin{center}
    \begin{tikzcd}
      H^{i-1}(R_\chi)\ar[r]\ar[dr]\ar[dd,"f^{i-1}"] & H^{i-1}(C_\chi)\ar[r]\ar[dr]\ar[dd, shift right=1ex, near start, "f^{i-1}"] & H^i(A)\ar[r]\ar[dr,"\varphi^\ast"] & H^i(R_\chi)\dots\ar[dr] & \\
      & H^{i-1}(R_\xi)\ar[r]\ar[dd,"f^{i-1}",crossing over,near start] & H^{i-1}(C_\xi)\ar[r]\ar[dd,crossing over, near start, "f^{i-1}"] & H^i(A')\ar[r] & H^i(R_\xi)\dots \\
      T^{i-1}(R_\chi)\ar[r] & T^{i-1}(C_\chi)\ar[r]\ar[dr] & T^i(A)\ar[r]\ar[dr,"T^i(\varphi)"] & T^i(R_\chi)\dots\ar[dr] & \\
      & T^{i-1}(R_\xi)\ar[r] & T^{i-1}(C_\xi)\ar[r] & T^i(A')\ar[r] & T^i(R_\xi)\dots \\
      
      & a\ar[mapsto,r]\ar[dd,mapsto]\ar[rd,mapsto] & \chi\ar[r,mapsto]\ar[rd,mapsto] & 0\ar[rd,mapsto] & \\
      & & a'\ar[mapsto,r]\ar[dd,mapsto] & \xi\ar[r,mapsto] & 0 \\
      & b\ar[rd,mapsto]\ar[r,mapsto]& \mathrm{ext}(\chi,S_\chi)\ar[rd,mapsto] & & \\
      & & b'\ar[r,mapsto] & ? & 
      
    \end{tikzcd}
  \end{center}
  From exactness of the upper sequence, we get that there is a preimage $a$ of $\chi$.
  Let $a'$ denote the image of $a$ in $H^{i-1}(C_\xi)$,
  then $a'$ will be a preimage of $\xi$ in the other sequence by commutativity.
  That means, $b'$ will be mapped to $ \mathrm{ext}(\xi,S_\xi)$,
  but by commutativity, $\mathrm{ext}(\chi,S_\chi)$ will be mapped to the same thing by $T^i(\varphi)$.
  So
  \[ T^i(\varphi)(\mathrm{ext}(\chi,S_\chi))=\mathrm{ext}(\xi,S_\xi)\]  
\end{proof}


The following is provable by a constructive adaption of Prop 2.2.1 in \cite{tohoku-translation}:
\begin{theorem}
  \label{thm:universal}
  Let $X$ be a type.
  An exact $\partial$-functor $(T^i)_i$ from $\mathcal A$ to $\AbGroup$ is universal,
  if $\mathcal A$ has local resolutions for $T$.
\end{theorem}

TODO: The proof, which takes the remainder of the section needs to be refactored to match the statement of the theorem
(the proof is still about $(H^i)_i$ specifically, but we need it for $(H^i(X,\_))_i$ \emph{and} $(\v{H}^i(\{U\},\_))_i$ ).

\begin{proof}[of \cref{thm:universal}]
  First of all, $H$ is a $\partial$-functor by \cref{prop:cohomology-les}.

  To extend a given morphism $f^0$, 
  we will construct $f^i:H^i\to T^i$ recursively for $i\in\N$.
  The construction of $f^i$ will be done pointwise, for each element of $H^i(X,A)$ using the recursion principle for 0-truncation.
  Since the codomain of $f^i$ is 0-truncated, the latter means, we can just assume that each element is of the form $|\chi|:H^i(X,A)$
  for some cohomology class $\chi:(x:X)\to A_{x,i}$.

  So assume $i\neq 0$ and let $\chi:(x:X)\to A_{x,i}$.
  By \cref{thm:resolution-exists} we have the standard short exact sequence $S_\chi$ resolving $\chi$,
  so we can use \cref{lem:extend-map} to construct an image $f^i(|\chi|):\equiv \mathrm{ext}(\chi,S_\chi)$.
  
  To see that a natural homomorphism of abelian groups $f^i$ can be constructed in this way,
  we will \cref{lem:extension-welldefined}.

  We can apply \cref{lem:extension-welldefined} to the morphism from \cref{rem:prod-resolve-sequence},
  to see that we could have define $f^i(|\chi|)$ as well by
  a resolution of the three classes $\chi, \xi, \chi+\xi:(x:X)\to A_{x,i}$.
  But this is already enough to conclude that $f^i(|\chi|+|\xi|)=f^i(|\chi)+f^i(\xi)$, by the homomorphism properties of the maps involved in the construction in \cref{lem:extend-map}.

  For a morphism $\varphi:A\to A'$ of spectra over $X$,
  we can use the morphism of resolving sequences from \cref{rem:cong-resolve-sequence}.
  Then \cref{lem:extension-welldefined} tells us directly, that $f^i$ is natural.
  
  For the commutativity of $f^i$ with connecting morphisms, let $x:X$ and consider a short exact sequence $S$:
  \begin{center}
    \begin{tikzcd}
      A_x\ar[r,"\psi_x"] & A'_x\ar[r] &  A''_x
    \end{tikzcd}
  \end{center}
  For any $\chi_x:A_{x,i }$, we can construct the following diagram:
  \begin{center}
    \begin{tikzcd}
      A_{x,i}\ar[r,"\psi_{x,i}"]\ar[d,equal] & A_{x,i}'\ar[r]\ar[d] & A_{x,i}''\ar[d,dashed] \\
      A_{x,i}\ar[r,"\widehat{\Delta\circ\psi_{x,i}}"]\ar[d,equal] & \widehat{\left((\chi_{x}=\ast)\to A_{x,i}'\right)}\ar[r]  & \mathrm{Cok}(\widehat{\Delta\circ\psi_{x,i}}) \\
      A_{x,i}\ar[r,"\widehat{\Delta}"] &  \widehat{\left((\chi_{x}=\ast)\to A_{x,i}\right)}\ar[r]\ar[u] & \mathrm{Cok}(\widehat{\Delta})\ar[u,dashed]
    \end{tikzcd}
  \end{center}
  If we know $\psi_{x,i}(\chi_{x})=\ast$, then $\chi_{x,i}$ will also equal $\ast$ in $\left((\chi_{x}=\ast)\to A_{x,i}'\right)$ and $\left((\chi_{x}=\ast)\to A_{x,i}\right)$.
  This is still true in connective covers.
  So we have morphisms between three resolving sequences and we
  can apply \cref{lem:extension-welldefined} twice to get:
  \[ \mathrm{ext}(\chi,S)=\mathrm{ext}(\chi,S_\chi)\equiv f^i(|\chi|)\]
  -- where $S$ is the given short exact sequence and $S_\chi$ the standard resolving sequence for $\chi$.

  What remains now, is to use this to show that the following diagram (from the LES for $S$) commutes:
  \begin{center}
    \begin{tikzcd}
      H^{i-1}(A'')\ar[r,"\partial"]\ar[d,"f^{i-1}"] & H^i(A)\ar[d,"f^i"] \\
      T^{i-1}(A'')\ar[r,"\partial"] & T^i(A)
    \end{tikzcd}
  \end{center}
  So let $|\xi|:H^{i-1}(A'')$ and $|\chi|:\equiv \partial(|\xi|)$.
  Then, by exactness, we know $\psi^\ast(|\chi|):H^i(A')$ is zero.
  This means the underlying class is merely zero and we can apply what we just proved,
  to (merely) get that
  \[ \partial(f^{i-1}(|\xi|))=\mathrm{ext}(\chi,S)=\mathrm{ext}(\chi,S_\chi)\equiv f^i(|\chi|)=f^i(\partial(|\xi|))\]
  Done.
\end{proof}
