In this section we work in with Zariski sheaves, i.e. the usual synthetic algebraic geometry. A lot of it is direct reformulation of the previous section.

\subsection{Definition of sheaves}

\begin{definition}
A pre-topology $T$ is a class of affine schemes.
\end{definition}

\begin{definition}
A topology $T$ is a class of affine schemes such that:
\begin{itemize}
\item It is stable by dependent sums and contains the unit.
\item It is stable by Zariski cover, meaning that given a Zariski cover:
\[\sum_{i:I}U_i \to X\]
if $X\in T$ then $\sum_{i:I}U_i\in T$.
\end{itemize}
\end{definition}

There is a smallest topology generated by a pre-topology. 

\begin{definition}
Let $T$ be a pre-topology, then a type is a $T$-sheaf if it is $\propTrunc{X}$-local for all $X\in T$. 
\end{definition}

This agree with the usual definition of sheaves at least for sets (and presumably for all $n$-types for a finite $n$). We write $L_T$ for $T$-sheafification, which is a lex modality. 

\begin{lemma}
Let $T$ be a topology and let $T'$ be the smallest topology containing $T$. A type is a $T$-sheaf if and only if it is a $T'$-sheaf.
\end{lemma}

\begin{proof}
We proceed as in \cref{topology-pretopology-same-sheaves}. The only new result we need is that is that the class of affine schemes $X$ such that $L_T\propTrunc{X}$ is closed by Zariski cover. But if:
\[Y\to X\]
is a Zariski cover then:
\[\propTrunc{Y}\leftrightarrow\propTrunc{X}\]
so we can conclude.
\end{proof}

\subsection{Covers and choice}

\begin{lemma}\label{sheaf-proposition}
Let $T$ be a topology and $P$ be a proposition, then:
\[L_T(P)\leftrightarrow \exists X\in T.\ P^X\]
\end{lemma}

\begin{proof}
We proceed as in \cref{sheaf-replacement-proposition}, using Zariski-local choice and the stability of $T$ by Zariski cover instead of choice.
\end{proof}

\begin{definition}
Let $T$ be a pre-topology. A $T$-cover of an affine scheme is inductively defined by:
\begin{itemize}
\item The identity is a $T$-cover, and the composite of $T$-covers is a $T$-cover.
\item A map:
\[f:X\to Y\] 
is a $T$-cover if we have a Zariski cover $(U_i)_{i:I}$ of $Y$ where the maps:
\[f:f^{-1}(U_i) \to U_i\]
are $T$-cover.
\item A map which fibers are in $T$ is a $T$-cover.
\end{itemize}
\end{definition}

\begin{lemma}\label{zariski-cover-are-cover}
For any pre-topology $T$, Zariski covers are $T$-cover.
\end{lemma}

\begin{proof}
Zariski covers are Zariski-locally identity maps.
\end{proof}

\begin{lemma}\label{cover-can-be-defined-pointwise}
Let $T$ be a pre-topology generating the topology $T'$. Then a map is a $T$-cover if and only if its fibers are in $T'$.
\end{lemma}

\begin{proof}
First we prove inductively that $T$-covers have fibers in $T'$. 
\begin{itemize}
\item If the $T$-cover is the identity, we can conclude as $1\in T'$. If it is a composite we conclude using the stability of $T'$ under dependent sums.
\item Assume a map:
\[f:X\to Y\] 
with a Zariski cover $(U_i)_{i:I}$ of $Y$ where the induced maps:
\[f_i:f^{-1}(U_i) \to U_i\]
have fibers in $T'$. Then any $y:Y$ is in $U_i$ for some $i$ so the fiber of $f$ over $y$ is equivalent to the fiber of $f_i$, which is in $T'$.
\item If the fibers of the $T$-cover are in $T$, then we can conclude as $T\subset T'$.
\end{itemize}
Now let us prove the converse. Assume given a map between affine schemes with fibers in $T'$. Zariski-locally we can assume we are in one of the following case:
\begin{itemize}
\item The fibers are $1$. We can conclude because identity maps are $T$-covers.
\item The fibers are dependent sum of things in $T'$. Here we conclude inductively from the fact that  $T$-covers are stable under composition.
\item The fibers are Zariski coverings of things in $T'$. Then the map is a composite of a Zariski cover followed by a $T$-cover. We conclude by \cref{zariski-cover-are-cover} and the stability of $T$-cover by composition. 
\item The fibers are in $T$. Then we conclude by definition.
\end{itemize}
\end{proof}

\begin{lemma}\label{cover-local-choice}
Let $T$ be a pre-topology, assume given an affine scheme $\Spec(A)$ and a family of types $P(x)$ for $x:A$. Assume:
\[\prod_{x:\Spec(A)}L_T\propTrunc{P(x)}\]
then there exists a $T$-cover:
\[f:\Spec(B)\to \Spec(A)\]
such that:
\[\prod_{y:\Spec(B)} P(f(y))\]
\end{lemma}

\begin{proof}
Same as \cref{sheaves-have-local-choice} considering $T'$ the topology generated by $T$, with \cref{cover-can-be-defined-pointwise} and Zariski-local choice rather than choice.
\end{proof}

\subsection{Sheaf models TODO}

This section is incomplete, we would need to study the sheaf interpretation more in details (TODO).

\begin{lemma}\label{cover-are-surjective}
Let $T$ be a pre-topology, then we have $L_T(\propTrunc{X})$ for all $X\in T$.
\end{lemma}

\begin{proof}
Immediate by \cref{sheaf-proposition}.
\end{proof}

\begin{theorem}\label{sheaves-internal}
Let $T$ be a subcanonical pre-topology, then $T$-sheaves enjoys the following:
\begin{enumerate}[(i)]
\item For any $X\in T$ we have $\propTrunc{X}$.
\item Synthetic quasi-coherence.
\item Affine schemes have $T$-local choice (meaning choice using $T$-covers).
\end{enumerate}
\end{theorem}

\begin{proof}
TODO
\end{proof}




