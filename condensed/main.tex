% latexmk -pdf -pvc main.tex
\documentclass{../util/zariski-small}


\title{Synthetic Stone Duality}

\begin{document}

\author{Felix Cherubini, Thierry Coquand, Freek Geerligs and Hugo Moeneclaey}

\maketitle

%\begin{abstract}
%In synthetic algebraic geometry (SAG) \cite{draft}, we study finitely presented algebras over a commutative ring. 
%In this work, we study countably presented Boolean algebras instead. 
%Where the finitely presented algebras over a commutative ring induce a Zariski topos, 
%%the opposite category of these 
%the countably presented Boolean algebras induce the topos of light condensed sets \cite{Scholze}. 
%\cite{draft} proposes an axiomatization of the Zariski topos in univalent homotopy type theory \cite{hott}. 
%In this work, we propose similar axioms, which we expect to be modelled by light condensed sets. 
%% Furthermore, spectra of countably presented Boolean algebras correspond to quotients of Cantor space
%% which is cool because reasons
%\end{abstract} 
%
\rednote{The following is a collection of notes on work in progress.}
\section{Countably presented Boolean algebras}
\subsection{Definitions}
\begin{definition}
  The language of Boolean algebras consists of
  \begin{itemize}
    \item Two symbols for constants $0,1$. 
    \item Two binary function symbols $\wedge, \vee$ called meet and join respectively. 
    \item One unary function symbol $\neg$ called negation. 
  \end{itemize}
\end{definition}
\begin{definition}
  The algebraic theory of Boolean algebras is as follows:
  \begin{itemize}
    \item We have axioms regarding order, sometimes called identity and absorption:
    \begin{itemize}
      \item $0 \wedge a = 0$. 
      \item $1 \wedge a = a$. 
      \item $0 \vee a = a$. 
      \item $1 \vee a = 1$. 
      \item $a \vee (a \wedge b) = a$
      \item $a \wedge (a \vee b) = a$. 
    \end{itemize}
    \item We have axioms regarding negations:
      \begin{itemize}
        \item $a \vee \neg a = 1$. 
        \item $a \wedge \neg a = 0$. 
        \item $\neg 1 = 0$. 
        \item $\neg \neg a = a$. 
      \end{itemize}
    \item We have axioms regarding commutativity and associativity:
      \begin{itemize}
        \item $a \vee b = b \vee a$. 
        \item $a \wedge b = b \wedge a$. 
        \item $(a \vee b) \vee c = a \vee (b \vee c)$. 
        \item $(a \wedge b) \wedge c = a \wedge (b \wedge c)$. 
      \end{itemize}
    \item We have axioms regarding distributivity:
      \begin{itemize}
        \item $a \vee (b \wedge c) = ( a \vee b) \wedge (a \vee c)$. 
        \item $a \wedge (b \vee c) = (a \wedge b) \vee ( a\wedge c)$. 
      \end{itemize}
    \item We have axioms called deMorgan's laws:
      \begin{itemize}
        \item $\neg (a \vee b ) = (\neg a) \wedge (\neg b)$. 
        \item $\neg (a \wedge b) = (\neg a) \vee (\neg b)$. 
      \end{itemize}
  \end{itemize}
\end{definition}
\begin{definition}
  Some language we will use is as follows:
  \begin{itemize}
    \item A Boolean algebra is a set-theoretic model of the theory of Boolean algebras. 
      It consists of a set $B$ and terms $0_B,1_B: B, \neg_B : B \to B, \vee_B, \wedge_B : B \times B \to B$ 
      satisfying the theory of Boolean algebras. 
      Sometimes we will leave out the subscript $(\cdot)_B$. 
    \item A morphism of Boolean algebra is a function between such sets preserving the operations above. 
      If $A,B$ are Boolean algebras, we write $A \to B$ for the type of such morphisms. 
%    \item We denote $id_B$ for the identity morphism $B \to B$. 
    \item If we have have two morphisms $f:A\to B , g : B \to A$ such that 
      $f\circ g (b) = b, g \circ f (a) = a$ for all $a:A, b:B$, 
      we say $A$ and $B$ are isomorphic and write $A \simeq B$. 
  \end{itemize}
\end{definition}
\begin{remark}
  We sometimes write $a \leq b$ and  $b \geq a$. Both of these mean that 
  $a\wedge b = a$, or equivalently $ a\vee b = b$. 
  Interpreting this notation as an order relation, we often think in the following terms:
  \begin{itemize}
    \item $a\wedge b$ is the biggest element $c$ with $c \leq a$ and $c\leq b$.
    \item $a\vee b$ is the smallest element $c$ with $c \geq a$ and $c \geq b$. 
    \item $0$ is the smallest element. 
    \item $1$ is the biggest element. 
  \end{itemize}
\end{remark}
\begin{remark}
  For a family of expressions $x_i$ over a 
  finite set of indices $I = \{i_0, \cdots, i_n\}$, we will sometimes denote 
  \begin{itemize}
    \item $\bigvee_{i:I} x_i = x_{i_0} \vee \cdots \vee x_{i_n}$,
      with the understanding that this equals $0$ if $I$ is empty. 
    \item $\bigwedge_{i:I} x_i = x_{i_0} \wedge \cdots \wedge x_{i_n}$,
      with the understanding that this equals $1$ if $I$ is empty. 
  \end{itemize}
\end{remark}
\begin{remark}
  Boolean algebras are in bijective correspondence with Boolean rings, which 
  are rings with the property that $x\cdot x = x$ for all $x$. 
  The underlying set remains the same, and the translation is as follows:
  \begin{itemize}
    \item 
      To go from such a ring to a Boolean algebra, we let 
      $0 = 0, 1 =1 ,  a \vee b = a + b + ( a \cdot b), a\wedge b = a \cdot b, \neg a = a + 1$. 
    \item 
      and to go from a Boolean algebra to a Boolean ring, we let 
      $0 = 0, 1 = 1, a + b = (a \wedge \neg  b) \vee ( \neg a \wedge b), a \cdot b = a\wedge b , -a = a$. 
\end{itemize}
\end{remark}

%\begin{definition}
%  Let $\mathcal L$ be a language, 
%  let $\phi,\psi$ be terms in any language,
%  and suppose that for some index set $I$ we have 
%  for each $i:I$ two terms $a_i,b_i$ of same sort in $\mathcal L$. 
%  Let $E= (a_i = b_i)_{i:I}$. 
%
%  We say that $E$ allows us to rewrite $\phi$ to $\psi$ if there is a finite list of expressions 
%  $\phi = \phi_0 , \phi_1, \phi_2, \cdots, \phi_{n-1}, \phi_n = \psi$, 
%  such that each $\phi_{n+1}$ is given by taking $\phi_n$ and either changing one occurence of $a_i$ to  $b_i$, 
%  or one occurence of $b_i$ to $a_i$ for some $i:I$. 
%\end{definition}


\begin{definition}
  Given any set of symbols $G$, the free Boolean algebra on $G$, denoted $\langle G \rangle$
  is constructed as follows:
  \begin{itemize}
    \item We add $G$ as set of constants to the language of Boolean algebras. 
    \item We consider the set of terms in this language. 
    \item If there merely exists some finite sequence of 
      equalities from the theory of Boolean algebras allowing us to rewrite one term to another, 
      we consider the two terms to be equivalent. 
    \item The free Boolean algebra is then the set of equivalence classes under this relation. 
  \end{itemize}
\end{definition}
\begin{remark}
  The free Boolean algebra is a Boolean algebra. 
\end{remark}
\begin{definition}
  Let $B$ be a Boolean algebra, a subset $I\subseteq B$ is an ideal iff 
  $0\in I$ and whenver $x,y \in I$ and $b\in B$, we have $x\vee y \in I$ and $x \wedge b \in B$. 

  If $I$ is an ideal of $B$, then for $a,b:B$, we write $x\sim_I y$ iff 
  $a - b  = 
  (a \wedge \neg b ) \vee ( \neg a \wedge b) 
  \in I$. 
\end{definition}
\begin{lemma}
  Let $B$ be a Boolean algebra, and let $I\subseteq B$ be an ideal. 
  Then the relation $\sim_I$ is an equivalence relation. 
\end{lemma}
\begin{proof}
  \begin{itemize}
    \item To see $\sim_I$ is reflexive, note that 
      $(x \wedge \neg x) \vee (\neg x \wedge x) = 0 \vee 0 = 0 \in I$. 
    \item To see $\sim_I$ is symmetric, note that 
      $ (a \wedge \neg b) \vee ( \neg a \wedge b) = 
        (b \wedge \neg a) \vee ( \neg b \wedge a)$. 
    \item To see $\sim_I$ is transitive, that 
      whenever $a,b \in I$, so is $ a + b$. 
      Thus if $a -b , b -c \in I$, so is 
      $(a -b) + (b-c) = a -c$.
  \end{itemize}
\end{proof}
\begin{lemma}
  Whenever $B$ is a Boolean algebra and $I\subseteq B$ an ideal, 
  $B/I$ is a Boolean algebra. 
\end{lemma}
\begin{proof}
  We need to show that the Boolean operations respect equivalence classes. 
  \begin{itemize}
    \item 
      Suppose $a \sim_I b$. We shall show that $\neg a \sim_I \neg b$. 
      Thus we need to show that 
      $((\neg a) \wedge (\neg \neg b)) \vee ((\neg \neg a) \wedge \neg b) \in I$, 
      this term is equal to 
      $( a \wedge \neg b) \vee (b \wedge \neg a)$, which is in $I$ as $ a\sim_I b$. 
    \item 
      Suppose $ a\sim _I b $. We shall show that 
      $a \wedge c \sim_I b \wedge c$. 
      Note that by distributivity of $+$ and $\cdot$, we have 
      $(a \cdot c) -( b \cdot c) = (a -b ) \cdot c = (a-b) \wedge c$. 
      By assumption $a -b \in I$, and thus $(a-b) \wedge c \in I$ as well. 
    \item Note that $a \vee b = \neg ( \neg a \wedge \neg b)$, by the above two properties, 
      joins therefore respect equivalence relations. 
  \end{itemize}
\end{proof}
\begin{definition}
  Let $B$ be a Boolean algebra, and let $R\subseteq B$. 
  We denote $\langle R\rangle $ for the ideal generated by $R$, 
  which is the set of expressions 
  $\{(\bigvee_{r \in R_0} r) \wedge b| R_0\subseteq R \text{ finite}, b \in B\}$
\end{definition} 
\begin{remark}
  For $R\subseteq B$ as above, $ \langle R \rangle$ is an ideal.
\end{remark}

\begin{remark}\label{rmkMorphismsOutOfQuotient}
  Let $B$ be a Boolean algebra. 
  
  Suppose $G$ is a set of symbols, to define a morphism 
  $\langle G \rangle \to B$ it is sufficient to define 
  a function from $G$ to the underlying set of $B$. 

  Let $C$ be a Boolean algebra, and let $I\subseteq C$ be an ideal. 
  To define a map $C / I \to B$, it is sufficient to define a map $f:C\to B$
  with $f(i) = 0$ for all $i\in I$. 
  If $I = \langle R\rangle $, it is sufficient that $f(r) = 0$ for all $r\in R$. 
\end{remark}
%\begin{remark}
%  For every element $x$ of $\langle G\rangle /R$ as above,
%  there merely exists a finite subset of generators $G_0\subseteq G$ such that $x$ is expressable 
%  as a Boolean combination of symbols from $G_0$. 
%\end{remark}
\begin{definition}
  Let $B$ be a Boolean algebra. 
  If there exist $G, R$ as above such that 
  $B \simeq \langle G \rangle /\langle R \rangle$, 
  we call $G,R$ respectively generators and relations for $B$. 
  %
  If $G,R$ can taken to be finite, we call $B$ finitely presented. 
  If $G,R$ can taken to be countable, we call $B$ countably presented. 
\end{definition}
\begin{remark}
  There is a category of Boolean algebras, which has a subcategory of countably presented Boolean algebras, 
  which has a subcategory of finitely presented Boolean algebras. 
\end{remark}
\begin{remark}\label{rmkBoolePushouts}
  All categories above have pushouts. 
\end{remark}
\begin{definition}
  Let $f:B\to C$ be a Boolean morphism. 
  The set $\{x \in B| fx = 0\}$ is called the kernel of $f$ and denoted 
  $Ker(f)$. 
\end{definition}
\begin{remark}
  For any map of Boolean algebras $f$, the kernel of $f$ is an ideal. 
  Furthermore, we have that $a\sim_{Ker(f)} b$ iff $f(a) = f(b)$. 
\end{remark}
\begin{remark}
  Let $f:B \to C$ be a Boolean morphism. 
  The epi-mono factorization of $f$ exists and is given by  
  $B \twoheadrightarrow B / Ker(f) \hookrightarrow C$.
\end{remark}

\subsection{Countably presented as colimit of finitely presented}
\input{ProFinite}

\subsection{Examples of countably presented Boolean algebras}
\begin{example}
  $2$ is the Boolean algebra given by the empty set of generators and no relations. 
    It's underlying set is $\{0,1\}$. 
\end{example}
\begin{example}
  The trivial Boolean algebra given by the empty set of generators and the relation $\{1\}$, 
  It's underlying set contains only one element and we have $0=1$ in the trivial Boolean algebra. 
\end{example}

\begin{example}\label{ExampleBAunderCantor}
  $C = \langle N \rangle $ is the Boolean algebra given by $\mathbb N$ as set of generators and no relations. 
\end{example}
\begin{example}\label{ExampleBAunderNinfty}
  Denote $\mathbb N_{(co)fin}$ for the set of subsets of $\mathbb N$ which are finite or co-finite. 
  Under the interpretation of $\wedge = \cap , \vee = \cup, 0 = \emptyset, 1 = \mathbb N$, and $\neg$ 
  as the set-theoretic complemented (denoted $(\cdot)^C$). 

  These operations are well-defined on $\mathbb N_{(co)fin}$ 
  and they give the structure of a Boolean algebra.
  We claim it is countably presented. 

  Let $G = \{p_n| n:\mathbb N\} $ be a countably infinite set of generator symbols and let 
  $R = \{ p_n \wedge p_m | n\neq m :\mathbb N \}$. 
  We claim that $\langle G \rangle / R \simeq \mathbb N_{(co)fin}$. 

\begin{proof}
  We let $f:\langle G \rangle / R \to \mathbb N_{(co)fin}$, be the unique morphism of Boolean algebras 
  satisfying $f(p_n) = \{n\}$ for all $n:\mathbb N$. As $\{n\} \cap \{m\} = \emptyset$ whenever $n\neq m$, 
  \Cref{rmkMorphismsOutOfQuotient} indeed tells us this is sufficient to define $f$. 

  Now we define $g:\mathbb N_{(co)fin} \to \langle G \rangle / R$. 
  On a finite subset $I$, we define $g(I) = \bigvee_{i\in I} p_i$, 
  and on a cofinite subset $J$, we define $g(J) = \bigwedge _{i \in J^C} \neg p_i$. 
  Note that in these cases we indeed have $I,J^C$ are finite, so these are well-defined elements. 

  We need to show that $g$ is a Boolean morphism. 
  \begin{itemize}
    \item 
      By deMorgan's laws, $g$ preserves $\neg$:
      for $I$ finite we have
      \begin{equation}
      \neg g(I) = \neg (\bigvee_{i\in I} p_i) = \bigwedge_{i\in I} \neg p_i = g(I^C)
      \end{equation}
      And for $J$ cofinite, we apply similar reasoning. 
    \item To see that $g$ preserves $\vee$, we need to check three cases
      \begin{itemize}
        \item If both $I,J$ are finite, then 
        \begin{equation} 
          g(I \cup J) = \bigvee_{i\in I \cup J} p_i= \bigvee_{i\in I} p_i \vee \bigvee_{j\in J} p_j 
          = g(I) \vee g(J)
        \end{equation}
        and we're done. 
      \item If both $I,J$ are cofinite, we have
        \begin{equation}
          g(I) \vee g(J) = 
          \bigwedge_{i \in I^C} \neg p_i \vee 
          \bigwedge_{j \in J^C} \neg p_j 
          = 
          \bigwedge_{i\in I^C} 
          \bigwedge_{j \in J^C}(\neg p_i \vee  \neg p_j) 
        \end{equation}
        Now note that in $\langle G \rangle / R$, we have 
        \begin{equation}
          \neg p_i \vee \neg p_j = \neg ( p_i \wedge p_j) = 
          \begin{cases}
            p_i \text{ if } i = j\\
            1 \text{ if } i \neq j  
          \end{cases}
        \end{equation}
        Therefore, we can leave out the case that $i\neq j$ in the calculation of the above meet, and
        \begin{equation}
          \bigwedge_{i\in I^C} 
          \bigwedge_{j \in J^C}(\neg p_i \vee  \neg p_j)  
          = 
          \bigwedge_{i \in (I^C \cap J^C)} \neg p_i
          = 
          \bigwedge_{i \in (I \cup J)^C} \neg p_i 
        \end{equation}
        as $I\cup J$ must also be cofinite, this equals 
          $ g( I \cup J)$. 
        \item 
          If $I$ is finite and $J$ cofinite, we have 
          that $I\cup J$ is cofinite, hence 
          \begin{equation}
            g(I\cup J) = \bigwedge_{k\in (I \cup J)^C} \neg p_k
            = \bigwedge_{k \in (J^C -I)} \neg p_k
          \end{equation}
          Now note that 
          whenever $i\neq k$, we have 
          \begin{equation}
            p_i = (p_i \wedge \neg p_k) \vee (p_i \wedge p_k) = 
            (p_i \wedge \neg p_k) \vee 0 = p_i \wedge \neg p_k
          \end{equation}
          Hence by absorption
          \begin{equation} 
            (p_i \vee \neg p_k)  =
              \begin{cases}
                1 \text{ if } i = k \\
                \neg p_k \text{ if } i \neq k
              \end{cases}
          \end{equation}
          As for all $k\in J^C-I$ and all $i\in I$ we have $k\neq i$, we may thus write
          \begin{equation}
            \bigwedge_{k \in (J^C - I)} \neg p_k = 
            \bigwedge_{k \in (J^C - I)} (\neg p_k \vee (\bigvee_{i\in I} p_i))
          \end{equation}
          But now we can use that adding $1$ in a meet does not change the meet, and see that 
          \begin{equation}
            \bigwedge_{k \in (J^C - I)} (\neg p_k \vee (\bigvee_{i\in I} p_i))
            = 
            \bigwedge_{j \in J^C} (\neg p_j \vee (\bigvee_{i\in I} p_i))
          \end{equation}
          And using distributivity rules, we can see that 
          \begin{equation}
            \bigwedge_{j \in J^C} (\neg p_j \vee (\bigvee_{i\in I} p_i))
            = 
            (\bigwedge_{j \in J^C} \neg p_k) \vee (\bigvee_{i\in I} p_i)
          \end{equation}
          From which we may conclude that $g(I\cup J) = g(I) \cup g(J)$. 
      \end{itemize}
    \item The case for $\wedge$ is completely dual to the case for $\vee$. 
  \end{itemize}
We conclude that $g$ is a Boolean morphism. 
Furthermore, $g$ and $f$ are each other's inverse, thus the Boolean algebras are isomorphic. 
\end{proof}
\end{example}
\begin{remark}
  We will denote $B_\infty$ for $\langle G \rangle/ \langle R\rangle $ as above, 
  and by the above result, we have that any $b:B_\infty$ can be written 
  either as $\bigvee_{i\in I_0} p_i$ or as $\bigwedge_{i\in I_0} \neg p_i$ for some finite $I_0\subseteq \mathbb N$. 
\end{remark}
\section{Stone spaces}
\newcommand{\isSt}{\mathsf{isStone}}
\subsection{Definitions}
\begin{definition}
  For $B$ a countably presented Boolean algebra, we define $Sp(B)$ as the set of Boolean morphisms from $B$ to $2$. 
\end{definition}
\begin{definition}
  We define the predicate on types $\isSt$ by 
  \begin{equation}
    \isSt(X) := \sum\limits_{B : Boole} X = Sp(B)
  \end{equation} 
  A type $X$ is called \textit{Stone} if $\isSt(X)$ is inhabited.
\end{definition}
\subsection{Examples of Stone types}
\begin{example}\label{ExampleBAunderEmpty}
  The dual to the trivial Boolean algebra from $\Cref{ExampleBAunderEmpty}$ is the empty set $\emptyset$, 
  as $0\neq 1$ in $2$, but $0=1$ in the trivial Boolean algebra, there can be no functions preserving both $0$ and $1$ 
  from the trivial Boolean algebra to $2$. 
\end{example}
\begin{example}
  The dual to $C$ from \Cref{ExampleBAunderCantor} is called Cantor space 
  and denoted $2^\mathbb N$. 
  By \Cref{rmkMorphismsOutOfQuotient}, terms of $2^\mathbb N$ 
  correspond to set-theoretic functions $\mathbb N \to 2$. 
  We also call such functions binary sequences. 
\end{example}
\begin{example}
  The dual to $\mathbb N_{(co)fin}$ from \Cref{ExampleBAunderNinfty} is called 
  $\mathbb N_\infty$. By \Cref{rmkMorphismsOutOfQuotient}, terms of $\mathbb N_\infty$ 
  correspond to functions $\alpha: \mathbb N \to 2$ such that $\alpha(n) \wedge \alpha(m) = 0$ 
  whenever $n \neq m$. This means that $\alpha(n) = 1$ for at most one $n\in\mathbb N$. 
  There is an embedding $\mathbb N \to \mathbb N_\infty$ sending $n$ to the unique sequence $\chi_n$
  which sends $n$ to $1$. 
  There is furthermore a term $\infty:\mathbb N_\infty$ which is the sequence which is constantly $0$. 
\end{example}
\subsection{Axioms}
\begin{axiomNum}[Stone duality]
  For any countably presented Boolean algebra $B$, the evaluation map $B\rightarrow  2^{Sp(B)}$ is an isomorphism.
\end{axiomNum} 

\begin{remark}
Stone types will take over the role of affine scheme from \cite{draft}, 
and we repeat some results here. 
Analogously to Lemma 3.1.2 of \cite{draft}, 
for $X$ Stone, Stone duality tells us that $X = Sp(2^X)$. 
%
Proposition 2.2.1 of \cite{draft} now says that 
$Sp$ gives an equivalence 
\begin{equation}
   Hom_{\Boole} (A, B) = (Sp(B) \to Sp(A))
\end{equation}
Therefore $\isSt$ is a proposition.
Equivalently, 
%By Definition 4.6.1 %defines an embedding 
%of \cite{hott}, 
this means that 
$Sp$ is an embedding from $\Boole$ to any universe of types.
Its image, $\Stone$ also has a natural category structure.
By the above and Lemma 9.4.5 of \cite{hott}, 
the map $Sp$ defines a dual equivalence of categories between $\Boole$ and $\Stone$.
\end{remark}

\begin{axiomNum}[Surjections are formal Surjections]
  A map $f:Sp(B')\to Sp(B)$ is surjective iff the corresponding map $B \to B'$ is injective.
\end{axiomNum} 

\begin{lemma}\label{LemSurjectionsFormalToCompleteness}
 For $S:\Stone$, we have that $\neg \neg S \to || S ||$
\end{lemma}
\begin{proof}
  First, assume that surjections are formal surjections. 
  Let $B:\Boole$ and suppose $\neg \neg Sp(B)$. 
  %Note that if $0=1$ in $B$, then $Sp(B) =\emptyset$, meaning $\neg Sp(B)$. 
  %Therefore, we have $0\neq 1$ in $B$. 
  We will show that the map $f:2\to B$ is injective. 
  Let $f:2 \to B$, note that if $f(0) = f(1)$ then $0=1$ in $B$, 
  If $0=1$ in $B$, there are no maps $B\to 2$ preserving $0$ and $1$, thus $\neg Sp(B)$. 
  This is a contradiction with $\neg \neg Sp(B)$. Thus we may conclude that $f(0)\neq f(1)$. 
  Hence by case distinction on $2$ we can show $f$ we have that $f x = f y$ implies $ x= y$. Thus 
  $f$ is injective thus the map $Sp(B) \to Sp(2) = 1$ is surjective, thus $Sp(B)$ is merely inhabited. 
\end{proof} 
Actually, we will see in \Cref{CorDoubleNegToAx2} that the converse is also true. 

\begin{axiomNum}[Local choice]
  Whenever $X$ Stone and $E\twoheadrightarrow X$ surjective, then there is some $Y$ Stone,
    a surjection $Y \twoheadrightarrow X$ and a map $Y\to E$ such that the following diagram commutes:
    \begin{equation}\begin{tikzcd}
      E \arrow[d,""',two heads]\\
      X & \arrow[l, "", two heads] Y\arrow[lu, ""']
    \end{tikzcd}\end{equation}  
\end{axiomNum} 
\begin{axiomNum}[Dependent choice]\label{axDependentChoice}
  Given a family of types $(E_n)_{n:\mathbb N}$ and 
  a relation 
  $R_n:E_n\rightarrow E_{n+1}\rightarrow {\mathcal U}$ such that
  for all $n$ and $x:E_n$ there exists $y:E_{n+1}$ with $p:R_n~x~y$ 
  then given $x_0:E_0$ there exists
  $u:\Pi_{n:\N}E_n$ and $v:\Pi_{n:\N}R_n~(u~n)~(u~(n+1))$ and $u~0 = x_0$.
\end{axiomNum}
\subsection{Omniscience principles}
\begin{remark}\label{rmkTrivialBA}
  A Boolean algebra $B / R$ 
  is trivial iff there merely exists some $R_0\subseteq R$ finite with 
  $1 = \bigvee_{r \in R_0} r$ in $B$.
\end{remark}

\begin{theorem}[The negation of the weak limited principle of omniscience]
  It is not the case that for all $\alpha:\Noo$, we can decide whether $\alpha=\infty$.
\end{theorem}
\begin{proof}
  Suppose we could decide whether $\alpha = \infty$ for every $\alpha:\Noo$. We then have a term of type 
  $\Pi_{\alpha:\Noo} (\alpha \neq \infty) + (\alpha = \infty)$. 
  Using case distinction, we can define a map $f:\Noo \to 2$ such that 
  \begin{equation}
    f(\alpha) = \begin{cases} 0 \text{ if } \alpha \neq  \infty
    \\ 1 \text{ if } \alpha = \infty \end{cases} 
  \end{equation}
  By Stone duality, there must be some $b:B_\infty$ with 
  $f(\alpha) = 1 \iff \alpha(b) = 1$.
  $b$ is expressable using only finitely many generators $(p_n)_{n\leq N}$. 
  This means that $f$ can determine whether a sequence is constantly $0$ based on it's first $N$ entries. 
  In particular the value of $f$ on $\infty:\Noo$ and $\chi_{N+1}:\Noo$ must be equal, 
  as these sequences are equal on $(p_n)_{n\leq N}$ and thus on $b$. 
  However, $f(\infty) = 1$ and $f(\chi_N) = 0$. 
  We thus have a contradiction, and conclude we cannot decide whether $\alpha = \infty$ for general $\alpha:\Noo$. 
\end{proof}


The following result is due to David W\"arn.
\begin{theorem}[Markov's principle (uses Stone duality)]
  For $\alpha:\mathbb N_\infty$, we have that whenever $\alpha\neq \infty$, 
  there exists some $n:\mathbb N$ such that $\alpha = \chi_n$. 
\end{theorem}
\begin{proof}
  Suppose $\alpha \neq \infty$.%, then it is not the case that $\alpha(n) = 0$ for all $n:\mathbb N$. 
  We will show that $2/\{\alpha(n)|n\in\mathbb N\}$ is the trivial Boolean algebra. 
  Then by \Cref{rmkTrivialBA}, it follows there merely is a finite subset $N_0\subseteq \mathbb N$ 
  such that $\bigvee_{i:N_0}\alpha(i) =1$.
  For this finite set $N_0$, we can decide whether every $\alpha(i) =0$, 
  or there is some $i\in N_0$ such that $\alpha(i) =1$.
  As the join of these $\alpha(i)$ is $1$, we must have that there is some $n\in N_0$ with $\alpha(n) = 1$. 
  As $\alpha(j)=1$ for at most one $j$, we conclude that $\alpha = \chi_n$. 
  %

  To show that $2/\{\alpha(n)|n\in\mathbb N\}$ is trivial, we will show it has an empty spectrum. 
  Suppose $x: 2 \to 2$ is such that $x(\alpha(n)) = 0$ for every $n:\mathbb N$. 
  As $x(1) = 1\neq 0$, we must have for every $n:\mathbb N$ that $\alpha(n) \neq 1$. 
  Thus for every $n:\mathbb N$, we have $\alpha(n) = 0$, contradicting our assumption that $\alpha \neq \infty$. 
  Thus any such $x$ cannot exist and $Sp(2/\{\alpha(n)|n\in\mathbb N\}) = \emptyset$. 
  Thus $2/\{\alpha(n) | n \in \Noo \} = 2^\emptyset$, which is the trivial Boolean algebra. 
\end{proof}
\begin{corollary}\label{LemDecidableSubsetsDeMorgan}
  For $(A_n)$ a family of decidable subsets, we have
    $
    (\bigcup_{n:\mathbb N} A_n)^C
    =
    \bigcap_{n:\mathbb N} (A_n^C)
    $ 
    and 
    $
    \bigcup_{n:\mathbb N} (A_n^C)
    =  
    (\bigcap_{n:\mathbb N} A_n)^C
    $
\end{corollary}
\begin{proof}
\begin{itemize}
  \item 
    Let 
    $x\notin \bigcup_{n:\mathbb N} A_n$. 
    Then for every $n:\mathbb N$, we cannot have $x\in A_n$
    and thus $x\in A_n^C$ by decidability of $A_n$. 
    Thus $x\in \bigcap_{n:\mathbb N} (A_n^C)$. 
    Therefore
    $$
    (\bigcup_{n:\mathbb N} A_n)^C
    \subseteq 
    \bigcap_{n:\mathbb N} (A_n^C).
    $$ 
  \item 
    Suppose that for every $n:\mathbb N$, we have $x\notin A_n$. 
    There does not exist an $n:\mathbb N$ with $x\in A_n$. Thus
    $$
    \bigcap_{n:\mathbb N} (A_n^C)
    \subseteq 
    (\bigcup_{n:\mathbb N} A_n)^C
    $$ 
  \item 
    Suppose there exists some $n$ with $x\in A_n^C$. Then 
    it cannot be the case that $x\in A_m$ for all $m:\mathbb N$.
    Thus
    $$
    \bigcup_{n:\mathbb N} (A_n^C)
    \subseteq 
    (\bigcap_{n:\mathbb N} A_n)^C
    $$ 
  \item 
    Suppose that $x\in (\bigcap_{n:\mathbb N} A_n)^C$. 
    Then define the binary sequence $\alpha$ by $\alpha(i) =1$ iff $i$ is the first index such that 
    $x\notin A_i$. This is well-defined as $A_n$ is decidable for all $n:\mathbb N$. 
    If $\alpha(i) = 0$ for all $i$, then $x\in A_i$ for all $i$. 
%    and it is the case that $x\in A_n$ for all $n:\mathbb N$. 
    Thus under our assumption $x\in (\bigcap_{n:\mathbb N} A_n)^C$, 
    we cannot have that $\alpha(i) = 0$ always. 
    By Markov, there then exists an $i$ such that $\alpha(i) = 1$. 
    Thus $x\notin A_i$ for some $i$. We conclude that. 
    $$
    (\bigcap_{n:\mathbb N} A_n)^C
    \subseteq
    \bigcup_{n:\mathbb N} (A_n^C)
    $$ 
\end{itemize}
\end{proof} 
Note that we only needed decidability for the first and last bullet point, 
and only the last bullet point used countability (and of course Markov's principle). 

\begin{theorem}[The lesser limited principle of omniscience (LLPO)]
  For $\alpha:\mathbb N_\infty$, 
  we have that 
  \begin{equation}\label{eqnLLPO}
    \forall_{k:\mathbb N} \alpha(2k) = 0  \vee \forall_{k:\mathbb N} \alpha(2k+1) = 0
  \end{equation}
\end{theorem}
\begin{proof}
  We first will define a map $f:B_\infty \to B_\infty \times B_\infty$. 
  Because of \Cref{rmkMorphismsOutOfQuotient}, it is sufficient to define $f$ on $(p_n)_{n:\mathbb N}$ with 
  $f(p_n) \wedge f(p_m) = (0,0)$ for $n\neq m$. 
  To define $f(p_n)$, we use a case distinction on whether $n$ is odd or even. 
  \begin{equation}
    f(p_n) =\begin{cases}
      (p_k,0) \text{ if } n = 2k\\
      (0,p_k) \text{ if } n = 2k+1\\
    \end{cases}
  \end{equation}
  By making a case distinction on $n,m$ being odd or even, 
  we can indeed see that $f(p_n) \wedge f(p_m) = (0,0)$ when $n\neq m$. 
  We will show that $f$ is injective. 
  If it is, then as surjections are formal surjections, $f$ corresponds to a surjection $s:\Noo + \Noo \to \Noo$.
  This means that for every $\alpha:\Noo$ there merely is some $x:\Noo + \Noo$ such that $s(x) = \alpha$. 
  Now we want to show that \Cref{eqnLLPO} holds for $\alpha$. 
  As we need to show a propositional truncation, we can assume $x$ is given and make a case distinction whether 
  it is of the form $inl(\beta)$ or $inr(\beta)$ for some $\beta:\Noo$. 
  If $x = inl(\beta)$, then for any $k:\mathbb N$, we have that 
  $s(x) (p_{2k+1}) = x(f(p_{2k+1})) = inl(\beta) (0,p_k)  = \beta(0) = 0$. 
  And if $x=inr(\beta)$, by similar argument it follows that for all $k:\mathbb N$
  we must have $s(x)(p_{2k}) = 0$. 
  Thus if we can show that $f$ is injective, we have \Cref{eqnLLPO}.
  
  To see that $f$ is injective, it is sufficient to show that whenever $f(x) = 0$, we must have $x = 0$. 
  Suppose $f(x) = 0$. %We make a case distinction on whether $x$ is finite or cofinite. 
  We make a case distinction on whether $x$ corresponds
  to a finite or cofinite subsets of $\mathbb N$. 
  We'll denote $E,O\subseteq \mathbb N$ for the even and odd numbers.
  \begin{itemize}
    \item Let $x$ correspond to a finite subset of $\mathbb N$. Write 
      $x = \bigvee_{i\in I_0} p_i$ for $I_0\subseteq \mathbb N$ finite. 
      Then $f(x) = (\bigvee_{i\in I_0 \cap E } p_{\frac i2} , \bigvee_{i\in I_0 \cap O } p_{\frac {i-1}2} ) = (0,0)$
      But now as $p_j\neq 0$ for all $j\in\mathbb N$, we must have $I_0 \cap E = \emptyset = I_0 \cap O$. 
      Thus $I_0= \emptyset$, and $x = 0$. 
    \item Let $x$ correspond to a cofinite subset of $\mathbb N$. Write 
      $x = \bigwedge_{j\in J} \neg p_j$ for $J$ finite. 
      We will derive a contradiction, from which we can conclude that $x=0$ after all. 
      Then $f(x) = (\bigwedge_{j\in J \cap E } \neg p_j , \bigwedge_{j\in J \cap O } \neg p_j )$. 
      As $f(x) = (0,0)$, we have that 
      $\bigwedge_{j\in J \cap E } \neg p_j =0$ and
      $\bigwedge_{j\in J \cap O } \neg p_j  = 0$.
      However, any finite meet of negations will correspond to a cofinite set,
      in particular not to the empty set, giving a contradiction. 
      So $x = 0$. 
  \end{itemize}
  Therefore whenever $f(x) = 0$, we have $x = 0$, thus $f$ is injective, $s$ is surjective 
  and by the above reasoning for any $\alpha:\Noo$ we have \Cref{eqnLLPO}. 
\end{proof}
\begin{remark}
  The above function $f$ does not have a retraction. 
\begin{proof}
  Suppose it does, call the retraction $r:B_\infty \times B_\infty \to B_\infty$. 
  Consider $r(0,1)$. 
  As $r(0,1):B_\infty$, we merely have an representative in $\langle (p_k)_{k:\mathbb N}\rangle$ 
  expressing $r(0,1)$. This expression contains at most finitely many $p_k$. 
  Let $N$ be such that $r(0,1)$ does not contatin $p_k$ for $k \geq N$. 

  As maps of Boolean algebras are order-preserving, we have that 
  $r(0,1) \geq r(0,p_l) = p_{2l+1}$ for any $l:\mathbb N$. 
  So $r(0,1) \geq p_{k}$ for some $k \geq N$. 

  $r(0,1)$ cannot be finite, if it were, we'd have that  
  $r(0,1) = \bigvee_{i\in I_0} p_i$ with $k\notin I_0$, 
  but then $r(0,1) \wedge p_k = 0\neq p_k$ and $r(0,1) \not \geq p_k$.
  Thus $r(0,1)$ is cofinite. 
  By similar reasoning $r(1,0)$ is cofinite. 
  But now $r(0,1) \wedge r(1,0)$ is cofinite, but this should equal $r((1,0)\wedge (0,1)) = r(0,0) = 0$. 
  As $0$ is finite and $r(0,1)$ is cofinite, we have a contradiction. 

  Thus there does not exist a retraction of $f$. 
\end{proof}
\end{remark} 

\begin{corollary}\label{corAlternativeLLPO}
  LLPO is equivalent to the following statement:
  Let $(\phi_n)_{n:\mathbb N}, (\psi_m)_{m:\mathbb N}$ be families of decidable propositions indexed over $\mathbb N$.
  We then have 
  \begin{equation}
    (\forall_{n:\mathbb N} \forall_{m:\mathbb N} (\phi_n \vee \psi_m) )
    \leftrightarrow
    ((\forall_{n:\mathbb N} \phi_n) \vee (\forall_{m:\mathbb N} \psi_m) )
  \end{equation}
\end{corollary}
\begin{proof}
  Note that the implication from right to left in the above equation always holds
  

  \rednote{While \cite{ReverseMathsBishop} does mention LLPO, it doesn't mention this specific equivalence, 
  and there should be a reference for this result}
  Assume LLPO
  Assume that for every $n,m:\mathbb N$ we have $\phi_n \vee \psi_m$. 
  We will define a binary sequence $\beta$ and show that $\beta(n)$ is $1$ at most once. 
  First we define a binary sequence $\alpha$
  such that $\alpha(2n) = 0$ iff $\phi_n$ holds and $\alpha(2m+1) = 0$ iff $\psi_m$ holds. 
  We let $\beta(k) = 1$ iff $k$ is minimal with $\alpha(k) = 1$. 
  By this minimality, we clearly have that $\beta$ is $1$ at most once and thus defines a term of $\Noo$. 
  By LLPO, we have that 
  $\forall_{k:\mathbb N} \beta(2k+1) = 0\vee \forall_{k:\mathbb N} \beta(2k+1) = 0$. 
  As we're proving a proposition, we can unpack this truncation, and make a case distinction on
  $\forall_{k:\mathbb N} \beta(2k+1) = 0 + \forall_{k:\mathbb N} \beta(2k+1) = 0$. 

  Assume that $\forall_{k:\mathbb N} \beta(2k+1) = 0$. 
  Let now $m:\mathbb N$. We claim that $\psi_m$ will hold. 
  Suppose $\neg \psi_m$, then $\alpha(2m+1) = 1$. However, as $\beta(2m+1) = 0$, there 
  $k = 2m+1$ is not minimal such that $\alpha(k)  = 1$.
  There is thus some  some $l\leq 2k+1$ with $\alpha(l) = 1$. 
  As $\beta(2k+1) = 0$ for all $k$, we have that $l$ must be even. 
  Therefore $\alpha(2n) = 1$ for some $n:\mathbb N$, meaning that $\neg \phi_n$. 
  But now $\neg \phi_n \wedge \neg \psi_m$, which contradicts 
  $(\forall_{n:\mathbb N} \forall_{m:\mathbb N} (\phi_n \vee \psi_m) )$. 
  We thus have that $\neg \psi_m$ is false. As $\psi_m$ is decidable, we conclude $\psi_m$. 
  Thus for all $m:\mathbb N$, we have $\psi_m$. Thus 
  $((\forall_{n:\mathbb N} \phi_n) \vee (\forall_{m:\mathbb N} \psi_m) )$ 
  as required. 

  The other case is symmetric. We conclude that 
  \begin{equation}
    (\forall_{n:\mathbb N} \forall_{m:\mathbb N} (\phi_n \vee \psi_m) )
    \to
    ((\forall_{n:\mathbb N} \phi_n) \vee (\forall_{m:\mathbb N} \psi_m) )
  \end{equation}

  Conversely, assume the above equation holds. 
  Given any sequence $\alpha:\Noo$, because it is $1$ at most once, we have that 
  $\alpha(n) = 0 \vee \alpha(n+1) = 0$ for all $n:\mathbb N$. Applying the above equation then gives LLPO for $\alpha$. 
\end{proof}
\subsection{Topology}
\rednote{Active}
\begin{definition}
  Let $P$ be a proposition. 
  \begin{itemize}
    \item $P$ is decidable if $P + \neg P$
    \item $P$ is open if there merely exists some $\alpha:\Noo$ such that $P \leftrightarrow \alpha \neq \infty$. 
    \item $P$ is closed if there merely exists some $\alpha:\Noo$ such that $P \leftrightarrow \alpha = \infty$. 
  \end{itemize}
\end{definition}

\begin{remark}
  Let us state some alternative definitions of open and closed:
  \begin{itemize}
    \item 
      By Markov, $P$ being open iff there merely exists some $\alpha:\Noo$ such that 
      $P\leftrightarrow \exists_{n:\mathbb N} \alpha(n) = 1$. 
    \item 
      $P$ is open iff there merely exists some $\alpha:2^\mathbb N$ such that $P\leftrightarrow \exists n \alpha(n) = 1$.
    \item 
      $P$ is closed iff there merely exists some $\alpha:2^\mathbb N$ such that $P\leftrightarrow \forall n \alpha(n) = 0$.
\end{itemize}
\end{remark}

\begin{remark}\label{rmkOpenClosedNegation}
  The negation of an open proposition is a closed proposition.
  Furthermore, both open and closed propositions are double negation stable by Markov, 
  meaning that for $P$ open or closed, we have $\neg \neg P \to P$.
\end{remark}

\begin{lemma}\label{lemOpenClosedDisjunctionConjunction}
  Closed propositions are closed under countable $\Pi$-types and countable conjunctions.
  Open propositions are closed under countable $\Sigma$-types and finite conjunctions. 
\end{lemma}
\begin{proof}
  \begin{itemize}
    \item Let $P,Q$ be closed. We will show $P\vee Q$ closed as well. 
      Assume $P\leftrightarrow \alpha = \infty, Q \leftrightarrow \beta = \infty$. 
      Now $P\vee Q \leftrightarrow ((\forall_{n:\mathbb N} \alpha(n) = 0) \vee (\forall_{n:\mathbb N} \beta(n) = 0))$
      By \Cref{corAlternativeLLPO}, we have that 
      $P\vee Q \leftrightarrow \forall_{n:\mathbb N}  \forall_{m:\mathbb N}  (\alpha(n) = 0 \vee \beta(m) = 0)$
      For $s:\mathbb N \to \mathbb N \times \mathbb N$ surjective, this in turn is equivalent to 
      $\forall_{k:\mathbb N}  (\alpha(\pi_0(s(k))) = 0 \vee \beta(\pi_1(s_k)) = 0)$. 
      Define $\gamma(k) = 0$ iff $(\alpha(\pi_0(s(k))) = 0 \vee \beta(\pi_1(s_k)) = 0)$. 
      As this is decidable, $\gamma$ is well-defined as binary sequence, and 
      $P\vee Q \leftrightarrow \forall_{k:\mathbb N} \gamma(k) = 0$, thus $P\vee Q$ is closed. 
    \item Let $(P_n)_{n:\mathbb N}$ be a countable family of closed propositions. We will show that 
      $\forall_{n:\mathbb N} P_n$ is closed as well. 
      By \rednote{countable choice}, we have a function which for each $n:\mathbb N$ gives some $\alpha_n:\Noo$ 
      such that $P_n \leftrightarrow \alpha_n =\infty$. 
      Thus $(\forall_{n:\mathbb N} P_n )\leftrightarrow (\forall_{n:\mathbb N}(\alpha_n = \infty))$. 
      Let $s:\mathbb N \to \mathbb N \times \mathbb N$ surjective and let 
      $\beta(k) = \alpha_{\pi_0s(k)}(\pi_1 s(k))$. 
      Note that $\beta = \infty$ iff for every $n:\mathbb N$, and every $m:\mathbb N$, we have $\alpha_n(m) = 0$, 
      which happens iff $\alpha_n = \infty$. 
      We conclude that $\forall_{n:\mathbb N} P_n \leftrightarrow \beta = \infty$.
      Thus closed propositions are closed under countable conjunctions. 
    \item 
      Note that $\neg (P \vee Q) \leftrightarrow \neg P \wedge \neg Q$. 
      If $P,Q$ are open, then $\neg P, \neg Q$ are closed, and their conjunction is closed by the above. 
      Thus $\neg (P\vee Q)$ is closed, hence $P\vee Q$ is open. 
    \item Let $(P_n)_{n:\mathbb N}$ be a countable family of open propositions. 
      We will show that $\exists_{n:\mathbb N}$ is open as well. 
      By \rednote{countable choice}, we have a function which for each $n:\mathbb N$ gives some $\alpha_n:\Noo$ 
      such that $P_n \leftrightarrow \alpha_n \neq \infty$. 
      Thus $(\exists{n:\mathbb N} P_n) \leftrightarrow (\exists{n:\mathbb N}\alpha_n \neq \infty)$. 
      Let $s:\mathbb N \to \mathbb N \times \mathbb N$ surjective and let 
      $\beta(k) = \alpha_{\pi_0s(k)}(\pi_1 s(k))$. 
      Then let $\gamma(k) = 1$ iff $k$ is minimal with $\beta(k) = 1$. 
      Note that $\beta \neq \infty$ iff there is some $n:\mathbb N$, and some $m:\mathbb N$, with $\alpha_n(m) = 1$, 
      which happens iff $\alpha_n \neq \infty$. 
      We conclude that $\exists{n:\mathbb N} P_n \leftrightarrow \gamma \neq \infty$.
      Thus open propositions are closed under countable disjunctions. 
  \end{itemize}   
\end{proof}


\begin{lemma}
  For $P$ open and $Q$ closed or $P$ closed and $Q$ open, we have that $(P\to Q) \leftrightarrow (\neg P \vee Q)$. 
\end{lemma}
\begin{proof}
  Without losing generality, assume $P$ open and $Q$ closed. 
  The left direction is well-known. 
  What is also well-known is 
  $(P \to Q) \to \neg \neg (\neg P \vee Q)$.
  By \Cref{rmkOpenClosedNegation}, $\neg P$ is closed. 
  By \Cref{lemOpenClosedDisjunctionConjunction}, it follows that $\neg P \vee Q$ is closed. 
  By \Cref{rmkOpenClosedNegation} it follows that $\neg \neg (\neg P \vee Q) \to (\neg P \vee Q)$. 
  Thus $(P \to Q) \to (\neg P \vee Q)$ as required. 
\end{proof}
 


\begin{lemma}
  Equality in $B:\Boole$ is open and equality in $X:\Stone$ is closed. 
\end{lemma}
\begin{proof}
  Let $B:\Boole$, and let $a,b:B$. We will show that $a=b$ is closed. 
  Recall that $B = \langle G \rangle / \langle R \rangle$. 
  And that $(a=b):= (a-b \in \langle R \rangle)$, 
  where $\langle R \rangle$ is the set of expressions of the form
  $(\bigvee_{r\in R_0} r) \wedge b$ for $R_0\subseteq R$ finite and $b:\langle G \rangle$ 
  arbitrary. 
  In particular, note that $\langle R \rangle$ is countable. 
  Let $(r_n)_{n:\mathbb N}$ enumerate $ \langle R \rangle $
  Also note that equality in $\langle G \rangle$ is decidable. 
  Thus we can define a sequence $\alpha:\Noo$ with $\alpha(k) = 1$ iff $k$ is minimal with $a -b = r_n$. 
  Now $\alpha \neq \infty $ iff $a = b$. Thus $a=b$ is an open proposition. 

  Let $X:\Stone$ and let $x,y:X$. 
  Let $X= Sp(B)$ for $B = \langle G \rangle / \langle R \rangle $. 
  Note that $x=y$ iff $x(g) = y(g)$ for all generators $g:G$. 
  As $G$ is countable, we can enumerate it's elements as $(g_n)_{n:\mathbb N}$. 
  As equality in $B$ decidable, we can define a sequence $\alpha:\Noo$ 
  with $\alpha(k) = 1$ iff $k$ is minimal with $x(g_k) \neq y(g_k)$. 
  Now $\alpha(k) = 0$ for all $k$ iff for all $k$ we have $x(g_k) = y(g_k)$ and thus $x(g) = y(g)$ for all generators $g$ 
  and thus $ x= y$. 
  Thus $(x=y) \leftrightarrow \alpha= \infty$ and $ x=y$ is closed. 
\end{proof}


\begin{definition}
  For $S$ a set and $D\subseteq S$ an arbitrary subset, we call $D$ decidable/open/closed 
  iff for every $x:S$, $D(x)$ is decidable/open/closed. 
\end{definition}

\begin{lemma}
  Let $D\subseteq Sp(B)$. TFAE
  \begin{enumerate}[(i)]
    \item $D$ is decidable. 
    \item There merely exists some $b\in B$ such that $D = \{\alpha:Sp(B) | \alpha(b) = 1\}$. 
    \item There merely is a finite subset $G_0$ of the generators of $B$ such that 
      whenever $\alpha,\beta:Sp(B)$ are such that 
      $\alpha(g) = \beta(g)$ for all $g:G_0$ and $D(\alpha)$, we also have $D(\beta)$. 
    \item $D$ is both open and closed. 
  \end{enumerate}
\end{lemma}
\begin{proof}
  \begin{itemize}
    \item $(i) \to (ii)$.
      First, remark that decidable subsets $D$ give terms $f_D:2^{Sp(B)}$, by sending 
      $f(\alpha) = 1$ if $D(\alpha)$ and $f(\alpha) = 0$ if $\neg D(\alpha)$. 
      Stone duality then gives that this term corresponds to evaluation at some $b:B$. 
      Therefore $D(\alpha) \iff f(\alpha) = 1 \iff  \alpha(b) = 1$, as required. 
    \item $(ii) \to (1)$
      To decide $D(\alpha)$ is the same as to evaluate whether $\alpha(b) = 1$, which is decidable. 
    \item $(ii) \to (iii)$. If there exists a $b:B$ such that $D$ is the indicator of $b$ in the above way, 
      then we need only consider the generators occuring in a finite expression of $b$. 
    \item $(iii) \to (i)$. Because being decidable is a proposition, we can untruncate our assumption. 
      Suppose $D$ only depends on $n$ generators, then we need to only check the values 
  \end{itemize}
\end{proof}
\begin{lemma}
  Let $A\subseteq S$ be a subset of a Stone space. TFAE
  \begin{itemize}
    \item $A$ is closed. 
    \item There merely is a countable set set of decidable subsets $D_n\subseteq S$ with 
      $A = \bigcap_{n:\mathbb N} D_n$. 
    \item $\neg A$ is open. 
%    \item There merely is a countable set set of decidable subsets $E_n\subseteq S$ with 
%      $\neg A = \bigcup_{n:\mathbb N} D_n$. 
  \end{itemize}
\end{lemma}

\begin{corollary}\label{CorDoubleNegToAx2}
  If we have for $S:\Stone$ that $\neg \neg S \to ||S||$, 
  we can conclude that surjections are formal surjections. 
\end{corollary}
\begin{proof}
  \rednote{All the unkonw references are lemmas that still need to be done (or at least linked) without using ax2}
  Now assume that for $S:\Stone$, we have $\neg \neg S \to ||S||$. 
  Let $f:B \to B'$ be injective, and let 
  $g:S' \to S$ correspond to $f$. 
  To show that $g$ is surjective, we need to show that for any $x:S$, we have $||\sum\limits_{y:S'} g y = x||$. 
  By our assumption, we can prove this by showing that 
  \begin{equation}
    g^{-1}\{x\} := \sum\limits_{y:S'} g y = x
  \end{equation} is Stone and non-empty. 
    First note that $\sum\limits_{y:S'} g y = x$ is the pullback of $g$ and the map $1 \to S$ given by $x$.
      By duality and \Cref{rmkBoolePushouts} the pullback of Stone spaces is a Stone space. 
   

      By \Cref{lemPointsAreClosed} and \Cref{lemClosedIntersectionOfDecidable}, 
      $\{x\}$ is a countable intersection of decidable sets $\bigcap_{n:\mathbb N} D_n$. 
      We have that 
      \begin{equation}
        g^{-1}\{x\} = g^{-1}(\bigcap_{n:\mathbb N} D_n) = 
        \bigcap_{n:\mathbb N} g^{-1}(D_n)
      \end{equation} 
      Let $n:\mathbb N$. By Stone duality, the decidable subset $D_n$ corresponds to some $b_n:B$. 
      As $x\in D_n$, we have that $b_n \neq 0$. 
      As $f$ is injective, we have that $f(b_n) \neq 0$. 
      Therefore the corresponding decidable subset, which is $g^{-1}(D_n)$ is not empty. 

      Note that $D_n$ is a closed subset of a Stone space, hence Stone by \Cref{LemClosedSubsetOfStoneIsStone}, 
      and by the same argument as above $g^{-1}(D_n)$ is Stone. By our assumption $g^{-1}(D_n)$ is thus merely inhabited. 
      Now by \Cref{lemCompactnessCountableIntersection}, this gives that 
      $\bigcap_{n:\mathbb N} g^{-1}(D_n)$ is merely inhabited, as required. 
\end{proof}


\rednote{End of activity}

\subsection{Compact Hausdorff spaces}
\subsection{Analysis}

\section{Directed Univalence}
\input{DirectedUnivalence}

%\chapter{Axioms}
%\chapter{Stone Spaces}
%\chapter{Open and closed propositions}
%



\appendix
\rednote{The following is not put in order}
\section*{Introduction}
\input{introduction.tex}
%

\section{Omniscience principles}
\input{Omniscience/UnionIntersectionComplement}

\section{Topology}
\input{topology.tex}
\subsection{Compact Hausdorff}
\input{Topology/CompactHausdorff}
\input{IntersectionOfClosedIsClosedCmptHausdorff}

\subsection{Open propositions}
\input{OvertlyDiscrete/FactorizationFin}

\section{Analysis}

\subsection{Convergence}
\input{Convergence/convergenceClosed}
\input{Convergence/ConvergenceExtension}

\subsection{The interval}
%\input{Interval/TrinaryRep}
\input{Interval/BinaryRep}
%\printindex

\printbibliography

\end{document}
