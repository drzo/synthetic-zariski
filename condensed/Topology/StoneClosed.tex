\subsection{The topology on a Stone space}
\begin{theorem}\label{StrongVersionOfEquivalencesOfClosedSubsetsOfStone}
  Let $A\subseteq S$ be a subset of a Stone space. TFAE:
  \begin{enumerate}[(i)]
    \item There exists a map $\alpha_{(\cdot)}:S \to 2^\N$ such that 
      $A s \leftrightarrow \forall_{n:\N} \alpha_s(n) = 0$.
    \item There exists some countable family 
      $D_n,~{n:\N}$ 
      of decidable subsets of $S$ with $A = \bigcap_{n:\N} D_n$. 
    \item There exists a Stone space $T$ and some map $T\to S$ whose image is $A$. 
    \item $A$ is closed.
  \end{enumerate}
\end{theorem}
\begin{proof}
\item 
  \begin{itemize}
  \item[$(i)\leftrightarrow (ii)$.] 
    $D_n$ and $\alpha_{(\cdot)}$ can be defined from each other by 
%    Define the decidable subsets of $S$ 
     by $D_n(s) \leftrightarrow (\alpha_s(n) = 0)$. Then observe that %$A=\bigcap_{n:\N} D_n$ as 
     \begin{equation}
      (\bigcap_{n:\N} D_n) (s) \leftrightarrow 
      \forall_{n:\mathbb N} (\alpha_s(n) = 0) 
%      \leftrightarrow A s. 
     \end{equation}
   \item[$(ii) \to (iii)$.]
      Let $S=Sp(B)$. 
      By Stone duality, we have $d_n,~n:\N$ terms of $B$ such that $D_n = \{x:S| x(d_n) = 1\}$. 
      Let $C = B/\langle (\neg d_n)_{n:\N}\rangle$.
      By \Cref{FormalSurjectionsAreSurjections}, the quotient map $B \twoheadrightarrow C$
      corresponds to a injection $\iota:Sp(C) \hookrightarrow  S$. 
%      For $s:S$, $s$ lies in the image of this map iff $s(\neg d_n) = 0$, 
      and for any $n:\N$, we have 
      \begin{equation}
        x\in \iota(Sp(C)) \leftrightarrow x(\neg d_n) = 0 \leftrightarrow x(d_n) = 1 \leftrightarrow x\in D_n
      \end{equation}
      Thus the image of $\iota$ is given by $\bigcap_{n:\N} D_n$. 
%   \item[$(iii) \to (i)$.]
%     Let $\iota:T\hookrightarrow S$ be a injective map of Stone spaces with image $A$. 
%     Then $A(s) \leftrightarrow$
%
%  \item[$(iii) \leftrightarrow (iv)$.]
   \item [$(i) \to (iv)$.] By definition.
   \item[$(iv) \to (iii)$.]
     As $A$ is closed, it induces a map $a:S\to \Closed$. 
     We can cover the closed propositions with Cantor space
     by sending 
     $\alpha \mapsto \forall_{n:\mathbb N} \alpha n = 0.$
     Now local choice gives us that there merely exists $T, e, \beta_\cdot$ as follows:
     \begin{equation}
       \begin{tikzcd}
         T \arrow[r,"\beta_\cdot"] \arrow[d, two heads,"e"] & 2^\mathbb N 
         \arrow[d,two heads, "\forall_{n:\mathbb N} (\cdot)n = 0"] \\
         S \arrow[r,"a"] & \Closed
       \end{tikzcd} 
     \end{equation} 
     Define $B(t) \leftrightarrow \forall_{n:\mathbb N} \beta_t(n) = 0$. 
     As $(i) \to (iii)$ by the above, $B$ is the image of some Stone space. 
     Furthermore, note that $A$ is the image of $B$, thus $A$ is the image of some Stone space. 
   \item[$(iii) \to (i)$.] 
      Let $f:T\to S$ be a map between Stone spaces. 
      Let $A,B$ be the underlying Boolean algebras of $S,T$ respectively. 
      Let $G_A,G_B$ and $R_A,R_B$ be the countable sets of generators and relations of $A,B$.
      It is important to note that we can consider these countable sets before we consider any $s:S$. 
      \rednote{TODO can someone give feedback on this last sentence, I'm not sure it's clear}

      Following \Cref{FiberConstruction}, for each $s:S$, we can construct 
      a countable set $I\subseteq B$ such that $Sp(B/I) = \Sigma_{t:T} f(y) = t $.
      Now note that $s$ in the image of $f$ iff $0\neq_{B/I} 1$. 
      At this point, we have constructed the the generators and relations of $B/I$, 
      hence using the proof of \Cref{BooleEqualityOpen}, we can construct a sequence 
      $\alpha_s:2^\N$ such that $0 =_{B/I}1\leftrightarrow \exists_{n:\N} \alpha_s(n) = 0$. 
      And for $\beta_s(n) = 1-\alpha_s(n)$, we conclude that 
      \begin{equation}
        s\in f(T) \leftrightarrow \forall_{n:\N} \beta_s(n) = 0
      \end{equation}
\end{itemize} 
\end{proof} 
