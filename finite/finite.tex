We use definitions and results from \cite{draft} and \cite{proper-draft}.

There are a couple of equivalent definitions of finite schemes, which we will introduce and show to be equivalent in this section.

\begin{definition}
  A type $X$ is a \notion{finite scheme} if it is of the form $X=\Spec A$ for a finitely presented $R$-algebra which is finitely generated as an $R$-module.
\end{definition}

\begin{example}
  \begin{enumerate}[(a)]
  \item Finite types
  \item Infinitesimal disks $\D_k(n)\subseteq\A^n$ of order $k$
  \item Closed propositions
  \end{enumerate}
\end{example}

\begin{theorem}
  \label{finite-scheme-characterization}
  Let $X$ be a scheme, then the following are equivalent:
  \begin{enumerate}[(i)]
  \item $X$ is a finite scheme.
  \item There is an $R$-algebra $A$, such that $X=\Spec A$ where $A$ is a finitely presented $R$-module.
  \item WIP: There are finitely presented $R$-algebras $A,B$ with a surjective homomorphism $B\to A$, such that $X=\Spec A$, $A$ is a finitely presented $R$-module and $B$ is finite free as an $R$-module.
  \item $X$ is projective and affine.
  \item $X$ is compact and affine.
  \end{enumerate}
\end{theorem}

\begin{proof}
  (i) $\Leftrightarrow$ (iii): By constructive reading of Tag 0564 in the Stacks Project (TODO: turn into reference).
  For generators $e_i$ of $A$, $B$ is defined as $R[X_1,\dots,X_n]/(P_1,\dots,P_n)$ where $P_i$ are monic polynomials such that $P_i(e_i)=0$ in $A$.
  
  (iii) $\Rightarrow$ (iv): Let $A$ be finite free for now.
  We consider the projective space $\mathbb PA^\star$ associated with the R-linear dual of $A$.
  This is $\bP^{n-1}$ after choosing a basis of $A$.
  Given $[\varphi] : \bP A^\star$ we consider the proposition $C([\varphi])$ that $\varphi(1) \varphi(xy) = \varphi(x) \varphi(y)$ for all $x, y  : A$.
  This is well-defined and a closed proposition because it suffices to check it for basis elements of $A$.
  $C([\varphi])$ implies $\varphi(1) \ne 0$ because otherwise $\varphi(x)^2 = 0$ for all $x : A$ and then $\varphi$ is not-not zero (projective space contains only non-zero vectors).
  So $x \mapsto \varphi(x) / \varphi(1)$ determines a point of Spec A for $[\varphi] : \bP A^\star$ such that $C([\varphi])$ holds (and one can go in the reverse direction, and verify that the two maps are inverse to each other).
  
  \rednote{The case for an $R$-algebra $A$ which is a finitely presented $R$-module $A$ and a quotient of a finite free module $B$, it might go as follows:
  $\Spec(A)\subseteq \Spec(B)$ is closed, so compact, since $\Spec(R^n)$ is compact by the above.
  So the image of $\Spec(A)$ in $\bP^{n-1}$ is a compact $C$ and therefore the complement of an open in $\bP^{n-1}$.
  Specifically in $\bP^{n-1}$, this implies that $C$ is closed.
  }

  (iv) $\Rightarrow$ (v): Projective schemes are compact by \cite[Theorem 3.0.7]{proper-draft}. 
  
  (v) $\Rightarrow$ (i): (TODO: copy from \#6)
\end{proof}

\begin{lemma}
  Finite schemes are closed under dependent sums and identity types.
\end{lemma}

\begin{proof}
  Compact types and affine types are both closed under dependent sums (\cite[Lemma 2.0.3]{proper-draft}), so by the characterization in \Cref{finite-scheme-characterization},
  finite schemes are closed under dependent sums.
  Finite schemes are affine, so their identity types are closed propositions, which are finite schemes.
\end{proof}

It is possible to prove that finite schemes are compact without using the compactness of $\bP^n$:

\begin{proposition}\label{finite-compact}
Let~$A$ be a finitely presented~$R$-algebra. If furthermore~$A$ is finitely
generated as an~$R$-module, then~$X = \Spec(A)$ is compact (in the sense
that~$X$-indexed products of opens are open).\end{proposition}

\begin{proof}Let~$A = R[X_1,\ldots,X_k]/(q_1,\ldots,q_t)$. As~$A$ is finitely
generated as an~$R$-module, there are monic polynomials~$f_1,\ldots,f_k$ of
positive degree such that~$f_\ell(X_\ell) = 0$ in~$A$. Hence~$\Spec(A)$ is a
closed subset of~$\prod_{\ell=1}^k \Spec(R[X_\ell]/(f_\ell))$. As closed
subsets of compact sets are compact (\cite[Lemma 2.0.3]{proper-draft}+closed propositions are compact) and finite products
of compact sets are compact (\cite[Lemma 2.0.3]{proper-draft}), we are reduced to the
situation that~$A = R[X]/(f)$ where~$f = \sum_{j=0}^n a_{n-j} X^j$ is a monic
polynomial of positive degree~$n$. In this case~$X$ is the set of zeros of~$f$
and it suffices to prove: For every finite list~$g_1,\ldots,g_m : R[X]$ of
polynomials, the proposition that
\begin{equation}\label{finite-compact-eq}
  \tag{$\dagger$}
  \forall(u : R).\ \bigl(f(u) = 0 \Rightarrow \bigvee_{i=1}^m g_i(u) \neq 0\bigr)
\end{equation}
is open. To this end, we consider the polynomial
\[ p(U_1,\ldots,U_n,T) \vcentcolon= \prod_{j=1}^n \sum_{i=1}^m g_i(U_j) T^{i-1}. \]
Regarded as a polynomial in~$T$, its coefficients are symmetric in the~$U_i$.
By the fundamental theorem on symmetric polynomials, there are
polynomials~$h_0,\ldots,h_m : R[A_0,\ldots,A_{n-1}]$ such that
\[ p(U_1,\ldots,U_n,T) = \sum_{i=1}^m h_i(e_1(\vec U),\ldots,e_n(\vec U)) T^{i-1}. \]
We claim that proposition~\eqref{finite-compact-eq} is equivalent to the
disjunction
\begin{equation}\label{finite-compact-eq2}
  \tag{$\ddagger$}
  \bigvee_{i=1}^m (h_i(a_1,\ldots,a_n) \neq 0).
\end{equation}
Assume~Proposition~\eqref{finite-compact-eq}. As
Proposition~\eqref{finite-compact-eq2} is negative and hence double
negation stable, we may assume that~$f$ splits into linear factors: $f(X) =
\prod_{j=1}^n (X-u_j)$. By assumption, for every~$j \in \{1,\ldots,n\}$ we
have~$\bigvee_{i=1}^m (g_i(u_j) \neq 0)$. Hence
\begin{equation}\label{finite-compact-eq3}
  \tag{$\star$}
  1 \in \bigcap_{j=1}^n \bigl(g_i(u_j)\bigr)_{i=1}^m = c\Bigl(\sum_{i=1}^m g_i(u_j) T^{i-1}\Bigr) =
  c(p) = \bigl(h_i(a_1,\ldots,a_n)\bigr)_{i=1}^m,
\end{equation}
so Proposition~\eqref{finite-compact-eq2} holds. Here~$c$ refers to the radical
content of a polynomial, the radical of the ideal generated by its
coefficients, and the second equality is
by~\cite[Proposition~1]{banaschewski-vermeulen:radical}.
% https://core.ac.uk/reader/82176380

Conversely, assume Proposition~\eqref{finite-compact-eq2} and let~$u : R$ be a
zero of~$f$. As the claim that~$\bigvee_{i=1}^m (g_i(u) \neq 0)$ is double
negation stable, we may assume that~$f$ splits into linear factors,~$f(X) =
\prod_{j=1}^n (X-u_j)$, with~$u_1 = u$. By~\eqref{finite-compact-eq3}, we
have~$1 \in \bigl(g_i(u_1)\bigr)_{i=1}^m$ as desired.
\end{proof}
