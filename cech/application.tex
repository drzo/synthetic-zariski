
Following \cite{Hartshorne}[Theorem 5.1, Chapter III] we can apply \v{C}ech cohomology to compute
the cohomology of Serre's twisting sheaves $\mathcal O(d)$ on the projective space $\bP^n$ in \emph{synthetic} algebraic geometry.
We use the twisting sheaves as defined in \cite{draft}[6.3] and studied in \cite{sag-projective}.

Since our notion of exact sequence of coefficients is stronger than the external notion of exactness on stalks, our result for the existence long exact cohomlogy sequences is too \emph{weak}.
This problem appears in the proof below and is fixed by using the following strengthened result on long exact sequences
\footnote{The following lemma and its proof where improved during a discussion with Thierry Coquand}:

\begin{lemma}
  \label{local-les}
  Let $X$ be a separated scheme with open affine cover $\{U\}=(U_1,\dots,U_n)$,
  $M,N:X\to \Mod{R}_{wqc}$ and $m_x:M_x\to N_x, x:X$ such that
  \[
    m(U_i)\colonequiv (s:M(U_i)) \mapsto (x\mapsto m_x(s_x))
  \]
  is a monomorphism for all $i$.
  Let $C_x$ be the cokernel of $m_x$, then there is a long exact sequence of cohomology groups:
  \begin{center}
    \begin{tikzcd}
      & \dots\ar[r]& H^{n-1}(X,C)\ar[dll]\\
      H^n(X,M)\ar[r] & H^n(X,N)\ar[r] & H^n(X,C)\ar[lld] \\
      H^{n+1}(X,M)\ar[r] & H^{n+1}(X,N)\ar[r] & \dots
    \end{tikzcd}
  \end{center}
\end{lemma}

\begin{proof}
  Let $U_i=\Spec A_i$.
  To see that the sequence
  \begin{center}
     \begin{tikzcd}
       0\ar[r] & M(U)\ar[r,"m(u)"] & N(U)\ar[r] & C(U)\ar[r] & 0
     \end{tikzcd}
   \end{center}
   is exact, let $I_x$ be the image of $m_x$, $i_x:M_x\to I_x$ the canonical map, $K_x$ the kernel of $i_x$ and consider the diagram:
  \begin{center}
    \begin{tikzcd}
      & K_x\ar[d,hook] & & & \\
               & M_x\ar[r,"m_x"]\ar[d,two heads,"i_x"] & N_x\ar[r,two heads]\ar[d,equal] & C_x\ar[r]\ar[d,equal] & 0 \\
       0\ar[r] & I_x\ar[r,hook] & N_x\ar[r,two heads] & C_x\ar[r] & 0 \\
     \end{tikzcd}
   \end{center}
   -- as the image of a map of wqc-modules, $I_x$ is wqc again and we have $H^1(U_i,I)=0$ and analogously $H^1(U_i,K)=0$ by \Cref{affine-vanishing}.
   So the $i_x$ assemble to an isomorphisms by applying $\prod_{U_i}$ and all sequences are short exact using \Cref{EM-les}:
  \begin{center}
    \begin{tikzcd}
      & K(U_i)\ar[d,hook] & & & \\
               & M(U_i)\ar[r,"m_x"]\ar[d,"\simeq"] & N(U_i)\ar[r,two heads]\ar[d,equal] & C(U_i)\ar[r]\ar[d,equal] & 0 \\
               0\ar[r] & I(U_i)\ar[r,hook]\ar[d] & N(U_i)\ar[r,two heads] & C(U_i)\ar[r] & H^1(U_i,I)=0 \\
               & H^1(U_i,K)=0 & & & 
     \end{tikzcd}
   \end{center}   

   We have the same exactness result also for basic open subsets $D(f)\subseteq U_i$,
   since for wqc-modules $L:U_i\to \Mod{R}_{wqc}$ we have $L_{\vert D(f)}=A_i[1/f]\otimes_A L(U_i)$.
   In particular, since $X$ is separated, we have the short exact sequence above also for all intersections $U_{i_0,\dots,i_k}$, $k\geq 0$.
   
   So we can construct the long exact sequence of \v{C}ech-cohomology groups with the same argument as in the proof of \Cref{cech-les}.
   By the comparison \Cref{cech-EM-cohomology} between \v{C}ech and Eilenberg-MacLane cohomology, we get the result.
\end{proof}

\begin{definition}
  The ring $R[X_0,\dots,X_n]$ as well as its localizations by monomials are graded rings,
  where the degree $d:\Z$ elements are homogenous rational functions of degree $d$.
  We denote the $R$-module of degree $d$ elements of $R[X_0,\dots,X_n]_{X_{i_0}\dots X_{i_p}}$ by
  \[
    \left(R[X_0,\dots,X_n]_{X_{i_0}\dots X_{i_p}}\right)_d
    \rlap{.}
  \]
\end{definition}

\begin{theorem}
  \begin{enumerate}[(i)]
  \item For all $n:\N$, $d:\Z$, there are isomorphisms $R[X_0,\dots,X_n]_d\to H^0(\bP^n,\mathcal O(d))$ of $R$-modules, inducing an isomorphism $R[X_0,\dots,X_n]\to \bigoplus_{d:\Z} H^0(\bP^n,\mathcal O(d))$ of graded $R[X_0,\dots,X_n]$-modules.
  \item $H^n(\bP^n,\mathcal O(-n-1))=R$ is free of rank 1 and $H^n(\bP^n,\mathcal O(d))=0$ for $d>-n-1$.
  \item The canonical map given by tensoring
    \[
      H^0(\bP^n,\mathcal O(d)) \times H^n(\bP^n,\mathcal O(-d-n-1))\to R
    \]
    is a perfect pairing of finite free $R$-modules for all $d:\Z$.
  \item $H^i(\bP^n,\mathcal O(d))=0$ for $i\in\{1,\dots,n-1\}$ and all $d:\Z$.
  \end{enumerate}
\end{theorem}

\begin{proof}
  We cover $\bP^n$ by the affine open subschemes $U_i\colonequiv D(X_i)$.
  More generally, we use the shorthand $U_{i_0\dots i_p}\colonequiv D(X_{i_0}\dots X_{i_p})$
  and note
  \[
    \mathcal O(d)(U_{i_0\dots i_p})=\left(R[X_0,\dots,X_n]_{X_{i_0}\dots X_{i_p}}\right)_d
    \rlap{.}
  \]
  The \v{C}ech complex for this covering is
  \[
    \prod_{i_0}\left(R[X_0,\dots,X_n]_{X_{i_0}}\right)_d \to \prod_{i_0,i_1} \left(R[X_0,\dots,X_n]_{X_{i_0} X_{i_1}}\right)_d \to \dots \to \left(R[X_0,\dots,X_n]_{X_0\dots X_n}\right)_d
    \rlap{.}
  \]
  \begin{enumerate}[(i)]
  \item\label{twisting-global-sections} $H^0(\bP^n,\mathcal O(d))$ is the kernel of the first map in the \v{C}ech complex,
    so it consists of all families
    \[
      C=\left(\frac{P_i}{X_{i}^{l_i}}\right)_{i:\{0,\dots,n\}}
    \]
    of degree $d$ elements such that $X_i^{l_i}P_j=X_j^{l_j}P_i$ by regularity of $X_k$, $k=0,\dots,n$.
    Again by regularity and using this equation, $P_i$ is divisible by $X_i^{l_i}$, so $C$ was a family with values in $R[X_0,\dots,X_n]_d$.
  \item\label{twisting-Hn} $H^n(\bP^n,\mathcal O(d))$ is the cokernel of the map
    \[
      \prod_{i} \left(R[X_0,\dots,X_n]_{X_0\dots \hat{X_i}\dots X_n}\right)_d \to \left(R[X_0,\dots,X_n]_{X_0\dots X_n}\right)_d
      \rlap{.}
    \]
    The image of this map is freely generated by all degree $d$ monomials $X_0^{l_0}\dots X_n^{l_n}$ where $l_i\geq 0$ for some $i$.
    This means the cokernel is generated by all degree $d$ monomials $X_0^{l_0}\dots X_n^{l_n}$ with $l_i<0$ for all $i$.
    For $d= -n-1$ the only possibility is $l_i=-1$ for all $i$, so $H^n(\bP^n,\mathcal O(-n-1))$ is freely generated by this monomial.
    For larger $d$, there is no such monomial and we have $H^n(\bP^n,\mathcal O(d))=0$.
  \item For $d<0$, this is trivial by \ref{twisting-global-sections} and \ref{twisting-Hn}, so let $d\geq 0$.
    The pairing is given by multiplication of degree $d$ with degree $-d-n-1$ monomials:
    \[
      (X_0^{l_0}\dots X_n^{l_n}) \cdot (X_0^{m_0}\dots X_n^{m_n})=X_0^{l_0+m_0}\dots X_n^{l_n+m_n}
    \]
    where the right hand side is zero whenever there is $i$ such that $l_i+m_i\geq 0$.
    
    TODO: Finish, say why it is a perfect pairing and maybe what that means
  \item We will induct on the dimension $n$.
    For $n=2$, we need to show $H^1(\bP^2,\mathcal O(d))=0$ for all $d:\Z$.

    \dots

    Now let $n>2$ and $x:\bP^n$, with $x=[x_0:\cdots:x_n]$.
    We reduce to the case of a lower dimension, by using the following sequence, relating line bundles on $\bP^n$ to a line bundle on the hyperplane $x_0=0$ which is a $\bP^{n-1}$:
    \begin{center}
      \begin{tikzcd}
        \mathcal O(-1)_x=R\langle x\rangle\ar[r,"m_x"] & R\ar[r,"c_x"] & R^{x_0=0} \\
        v=\lambda(x_0,\dots,x_n)^T\ar[r,mapsto] & \lambda x_0\ar[r,mapsto] & \mathrm{const} (\lambda x_0)
      \end{tikzcd}
    \end{center}
    The map $m_x$ is well defined and $c_x$ is the cokernel of $m_x$, since we have $R^{x_0=0}=R^{\Spec R/(x_0)}=R/(x_0)$ by duality.
    This cokernel is preserved under tensoring with $\mathcal O(d)_x$ which gives the exact sequence
    \begin{center}
      \begin{tikzcd}
        \mathcal O(d-1)_x\ar[r,"m_x"] & \mathcal O(d)\ar[r,"c_x"] & {\mathcal O(d)}^{x_0=0}\ar[r] & 0
      \end{tikzcd}
    \end{center}
    
    $m_x$ is not a monomorphism for all $x:\bP^n$, but it does satisfy the condition of \Cref{local-les} for the cover $U_i\colonequiv (x_i\neq 0)$:
    The induced map $m(U_i)$ is the monomorphism
    \begin{center}
      \begin{tikzcd}
        \left(R[X_0,\dots,X_n]_{X_i}\right)_{d-1}\ar[r,"m(U_i)"] & \left(R[X_0,\dots,X_n]_{X_i}\right)_{d} \\
        P\ar[r,mapsto,shorten >= 4ex, shorten <= 5ex] & X_0\cdot P
      \end{tikzcd}
    \end{center}
    So by \Cref{local-les} we have the following long exact sequence:
    \begin{center}
      \begin{tikzcd}
        & \dots\ar[r]& H^{l-1}(\bP^{n},\mathcal O(d)^{x_0=0})\ar[dll]\\
        H^l(\bP^n,\mathcal O(d-1))\ar[r] & H^l(\bP^n,\mathcal O(d))\ar[r] & H^l(\bP^n,\mathcal O(d)^{x_0=0})\ar[lld] \\
        H^{l+1}(\bP^n,\mathcal O(d-1))\ar[r] &  \dots &
      \end{tikzcd}
    \end{center}
    The subscheme $(x_0=0)\subseteq \bP^n$ is isomorphic to $\bP^{n-1}$.
    Let $\varphi:\bP^{n-1}\to \bP^n$ be a corresponding embedding, then, using \Cref{cohomologically-trivial-fibers} we have
    \[
      H^{l}(\bP^n,\mathcal O(d)^{x_0=0})=H^l(\bP^n,\varphi_\ast\mathcal O(d))=H^l(\bP^{n-1},\mathcal O(d))
    \]
    where the right hand side is 0 by induction hypothesis, if $l\in\{1,\dots,n-2\}$.
    
    
    To prove this, we consider the sum over all $d:\Z$ of the \v{C}ech complex we used above, is a complex of graded $R[X_0,\dots,X_n]$-modules:
  \[
    \prod_{i_0}R[X_0,\dots,X_n]_{X_{i_0}} \to \prod_{i_0,i_1} R[X_0,\dots,X_n]_{X_{i_0} X_{i_1}} \to \dots \to R[X_0,\dots,X_n]_{X_0\dots X_n}
    \rlap{.}
  \]
  This is also the \v{C}ech complex of the wqc-module\footnote{Which is wqc by \cite{draft}[Proposition 7.1.9]} bundle $\bigoplus_{d:\Z}\mathcal O(d)$ on $\bP^n$.
  Localizing the complex at $X_0$ yields the \v{C}ech complex of $\bigoplus_{d:\Z}\mathcal O(d)_{\vert D(X_0)}$, which is exact at all terms except the first by \Cref{affine-vanishing}.
  Since localization is exact, we have $H^i(\bP^n,\bigoplus_{d:\Z}\mathcal O(d))_{X_0}=0$ for all $i>0$.
  We will finish this proof by showing that multiplication with $X_0$ is an isomorphism on $H^i(\bP^n,\bigoplus_{d:\Z}\mathcal O(d))_{X_0}=0$ for $i\in \{1,\dots,n-1\}$.

  Let us use the following abbreviations: $\mathcal F\colonequiv \bigoplus_{d:\Z}\mathcal O(d)$ and $S\colonequiv R[X_0,\dots,X_n]$.
  Let $S(k)$ denote the graded $S$-module with grading shifted by $k$.
  There is an exact sequence of graded $S$-modules:
  \begin{center}
    \begin{tikzcd}
      0\ar[r] & S(-1)\ar[r,"\cdot X_0"] & S\ar[r] & S/(X_0)\ar[r] & 0
    \end{tikzcd}
  \end{center}
  TODO: Finish
  
  \end{enumerate}
\end{proof}
