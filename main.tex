% latexmk -pdflatex='xelatex %O %S' -pvc -pdf main.tex
% latexmk -pdfxe -pvc main.tex
\documentclass{zariski}

\begin{document}

\begin{axiom}[Loc]%
  \label{loc}
  $R$ is a local ring.
\end{axiom}

\begin{axiom}[SQC]%
  \label{sqc}
  For any finitely presented $R$-algebra $A$, the homomorphism
  \[ a \mapsto (\varphi\mapsto \varphi(a)) : A \to (\Spec A \to R)\]
  is an isomorphism of $R$-algebras.
\end{axiom}

\ignore{


(fp) Affine schemes
  
  local ring

  (Loc) R is a fixed local ring
  
  finitely presented algebra
  
  Spec

  _ : A -> R^(Spec A)
  _ : X -> Spec (R^X)

  coupled

  (SQC) Synthetic quasi coherence

  External justification

  is-affine


Schemes
  we will only define quasi compact schemes  

  qc-Open subsets
  
  affine-open

}

\begin{definition}
  A \notion{closed proposition} is a proposition
  which is merely of the form $x_1 = 0 \land \dots \land x_n = 0$
  for some elements $x_1, \dots, x_n \in R$.
\end{definition}

\begin{proposition}[\axiomref{sqc}]
  There is an order-reversing isomorphism of partial orders
  \begin{align*}
    \text{f.g.-ideals}(R) &\xrightarrow{{\sim}} \Omega_{cl} \\
    I &\mapsto (I = (0))
  \end{align*}
  between the partial order of finitely generated ideals of $R$
  and the partial order of closed propositions.
\end{proposition}

\begin{proof}
  For a finitely generated ideal $I = (x_1, \dots, x_n)$,
  the proposition $I = (0)$ is indeed a closed proposition,
  since it is equivalent to $x_1 = 0 \land \dots \land x_n = 0$.
  It is also evident that we get all closed propositions in this way.
  What remains to show is that
  \[ I = (0) \Rightarrow J = (0)
     \qquad\text{iff}\qquad
     J \subseteq I
     \rlap{\text{.}}
  \]
  For this we use synthetic quasicoherence.
  Note that the set $\Spec R/I = \Hom_R(R/I, R)$ is a proposition
  (has at most one element),
  namely it is equivalent to the proposition $I = (0)$.
  Similarly, $\Hom_R(R/J, R/I)$ is a proposition
  and equivalent to $J \subseteq I$.
  But then our claim is just the equation
  \[ \Hom(\Spec R/I, \Spec R/J) = \Hom_R(R/J, R/I) \]
  which holds by Lemma \ref{MISSING},
  since $R/I$ and $R/J$ are finitely presented $R$-algebras
  if $I$ and $J$ are finitely generated ideals.
\end{proof}

\begin{theorem}[\axiomref{sqc},\axiomref{loc}]
  $\bP^n$ is a scheme.
\end{theorem}

\ignore{

  qc-open

  (Z-choice), (bound) zariski-local-choice, boundedness
  => qc-open
}

\begin{example}
  For $A$ a finitely presented $R$-algebra,
  consider the open cover ${(U_i)}_{i \in I}$,
  where the index set is $I = \Spec A$
  and for each $i$ we set $U_i = \Spec A = D(1)$.
  This indeed covers all points of $\Spec A$,
  since for every $x \in \Spec A$ we clearly have $x \in U_x$.
  To give a finite subcover of this cover, however,
  means to give a natural number $n$ and a function $\Fin n \to \Spec A$
  with the property that $\Spec A$ is empty if $n = 0$.
  In essence, it means to decide whether $\Spec A$ is inhabited or not.
  We claim that this is not possible for all finitely presented $R$-algebras:
  \[ \lnot (\Pi_{A : f.p. R\text{-Alg}} \propTrunc{\Spec A \amalg \lnot \Spec A} ) \rlap{.} \]
  Indeed, for $A = R/(x)$,
  the proposition $\propTrunc{\Spec A \amalg \lnot \Spec A}$ means $x = 0 \lor x \neq 0$,
  and we saw in~\ref{MISSING} that this is not true for all $x \in R$.
\end{example}

\ignore{
  external justification of zariski-local-choice, boundedness

  def qc-scheme
    example: qc-open proposition

  discuss alternative definitions (of open and scheme)

projective space
  functions on P^n are constant
 
  line bundles?

cohomology

  explanation: structure sheaf - why R?

  def: cohomology as 0-trunc((x:X) -> K(A_x,n))

  is-connected(R-torsors on Spec A)

  cohomology of twisting sheaves on P^n?

}
\end{document}
