\subsection{Homotopy type theory}

\begin{lemma}%
  \label{lem:kraus-glueing}
  Let $X$ and $I$ be types.
  For $(U_i:X \to \Prop)_{i:I}$ and $P:U_i\to \nType{0}$, we have the following glueing property: \\
  If for each $i:I$ there is a dependent function $s_i:(x:U_i)\to P(x)$ together with
  proofs of equality on intersections $p_{ij}:(x:U_i\cap U_j)\to (s_i(x)=s_j(y))$,
  then there is a globally defined dependent function $s:(x:X) \to P(x)$,
  such that for all $x:X$ and $i:I$ we have $U_i(x) \to s(x)=s_i(x)$
\end{lemma}

\begin{proof}
  We define $s$ pointwise.
  Let $x:X$.
  Using a Lemma of Kraus and the $p_{ij}$, we get a factorization
  \[ \begin{tikzcd}[row sep=0mm]
    \sum_{i:I} U_i(x) \ar[rr, "s_{\pi_1(\_)}(x)"]\ar[rd] & & P(x) \\
    & \|\sum_{i:I} U_i(x)\|_{-1}\ar[ru,dashed] &
  \end{tikzcd} \]
-- which defines a unique value $s(x):P(x)$.
\end{proof}

\subsection{Subtypes and Logic}

We use the notation $\exists_{x:X}P(x)\colonequiv \|\sum_{x:X}P(x)\|$.
We use $+$ for the coproduct of types and for types $A,B$ we write
\[ A\vee B\colonequiv \| A+B \|\rlap{.}\]

We will use subtypes extensively.

\begin{definition}
  Let $X$ be a type.
  A \notion{subtype} of $X$ is a function $U:X\to\Prop$ to the type of propositions.
  We write $U\subseteq X$ to indicate that $U$ is as above.
  If $X$ is a set, a subtype may be called \notion{subset} for emphasis.
\end{definition}

We will freely switch between subtypes $U:X\to\Prop$ and the corresponding embeddings
\[
  \begin{tikzcd}
    \sum_{x:X}U(x) \ar[r,hook] & X
  \end{tikzcd}
  \rlap{.}
\]
In particular, if we write $x:U$ for a subtype $U:X\to\Prop$, we mean that $x:\sum_{x:X}U(x)$ -- but we might silently project $x$ to $X$.

\begin{definition}
  Let $I$ and $X$ be types and $U_i:X\to\Prop$ a subtype for any $i:I$.
  \begin{enumerate}[(a)]
  \item The \notion{union} $\bigcup_{i:I}U_i$ is the subtype $(x:X)\mapsto \exists_{i:I}U_i(x)$.
  \item The \notion{intersection} $\bigcap_{i:I}U_i$ is the subtype $(x:X)\mapsto\prod_{i:I}U_i(x)$.
  \end{enumerate}
\end{definition}

We will use common notation for finite unions and intersections.
The following formula hold:

\begin{lemma}
  Let $I$, $X$ be types, $U_i:X\to\Prop$ a subtype for any $i:I$ and $V,W$ subtypes of $X$.
  \begin{enumerate}[(a)]
  \item Any subtype $P:V\to\Prop$ is a subtype of $X$ given by $(x:X)\mapsto\sum_{x:V}P(x)$.
  \item $V\cap \bigcup_{i:I} U_i=\bigcup (V\cap U_i)$.
  \item If $\bigcup_{i:I}U_i=X$ we have $V=\bigcup_{i:I}U_i\cap V$.
  \item If $\bigcup_{i:I}U_i=\emptyset$, then $U_i=\emptyset$ for all $i:I$.
  \end{enumerate}
\end{lemma}

\subsection{Algebra}

\begin{definition}%
  A commutative ring $R$ is \notion{local} if $1\neq 0$ in $R$ and
  if for all $x,y:R$ such that $x+y$ is invertible, $x$ is invertible or $y$ is invertible.
\end{definition}

\begin{definition}%
  Let $R$ be a commutative ring.
  A \notion{finitely presented} $R$-algebra is an $R$-algebra $A$,
  such that there merely are natural numbers $n,m$ and polynomials $f_1,\dots,f_m:R[X_1,\dots,X_n]$
  and an equivalence of $R$-algebras $A\simeq R[X_1,\dots,X_n]/(f_1,\dots,f_m)$.
\end{definition}

\begin{definition}%
  \label{def:regular-element}
  Let $A$ be a commutative ring.
  An element $r:A$ is \notion{regular},
  if the multiplication map $r\cdot\_:A\to A$ is injective.
\end{definition}

\begin{lemma}%
  \label{lem:units-products-regular}
  Let $A$ be a commutative ring.
  \begin{enumerate}[(a)]
  \item All units of $A$ are regular.
  \item If $f$ and $g$ are regular, their product $fg$ is regular.
  \end{enumerate}
\end{lemma}

\begin{example}
  The monomials $X^k:A[X]$ are regular.
\end{example}

\ignore{
    - injective/embedding/-1-truncated map
  pushouts:
    - inclusions are jointly surjective,
    - pushouts of embeddings between sets are sets
  subtypes:
    - embeddings (composition, multiple definitions, relation to injection)  
    - we freely switch between predicates and types
    - subtypes of subtypes are subtypes
  pullbacks:
    - pasting (reference)
    - pullback of subtype = composition
  algebra:
    - free comm algebras, quotients
    - other definitions of polynomials
    - fp closed under: quotients, adjoining variables, tensor products
}