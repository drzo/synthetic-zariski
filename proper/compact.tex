
The following is expected to be analogous to completeness in algebraic geometry.
Since it coincides with the defintion of compactness in synthetic topology (\cite{MISSING}),
we just call it compact:

\begin{definition}
  A type $X$ is \notion{compact},
  if for any open proposition $U:X\to\Open$ on $X$,
  the type $(x:X)\to U(x)$ is open.
\end{definition}

\begin{example}
  All finite types are compact, since a conjuction of open propositions is open.
\end{example}

\begin{lemma}
  \label{dependent-sum-compact}
  If $A$ is compact and for each $x:A$, $B(x)$ is a compact type,
  then the dependent sum $(x:A)\times B(x)$ is compact.
\end{lemma}

\begin{proof}
  Let $U:((x:A)\times B(x))\to\Open$ be open.
  We have to show $(y:(x:A)\times B(x))\to U(y)$ is open.
  By currying, this is $(x:A)\to (z:B(x))\to U(x,z)$.
  By compactness of each $B(x)$, the type $V_x\colonequiv (z:B(x)\to U((x,z))$ is open for all $x:A$.
  So we have to show $(x:A)\to V_x$ is open, but this is the case by compactness of $A$.
\end{proof}

\begin{lemma}
  \label{closed-proposition-compact}
  Any closed proposition is compact.
\end{lemma}

\begin{proof}
  Let $U:C\to\Open$.
  Then, by \cref{commute-open-in-closed-prop},
  there merely is $\tilde{U}:\Open$,
  such that $U(c) = \tilde{U}$ for any $c : C$.
  Thus $(x : C) \to U(x)$ is equivalent to $C \to \tilde U$.
  By \cref{closed-implies-open-to-or}, this is equivalent to $\neg C\vee \tilde{U}$,
  which is open.
\end{proof}

With this we can generalize \cref{commute-open-in-closed-prop} to types:

\begin{proposition}
  \label{commute-open-in-closed}
  Let $X$ be a type, $C\subseteq X$ a closed subtype and $U\subseteq C$ open.
  Then there is an open $\tilde{U}\subseteq X$ such that $\tilde{U}\cap C = U$.
\end{proposition}

\begin{proof}
  We take $\tilde{U}(x)\colonequiv (C(x)\to U(x))$.
\end{proof}

\begin{lemma}
  \label{closed-subtype-compact}
  A closed subtype of a compact type is compact.
\end{lemma}

\begin{proof}
  By \cref{closed-proposition-compact} and \cref{dependent-sum-compact}.
\end{proof}

\begin{lemma}
  \label{not-not-surjection-compact}
  If $A$ is compact and $f:A\to B$ is such that for all $y:B$,
  there not not exists $x:A$ with $f(x)=y$,
  then $B$ is compact.
\end{lemma}

\begin{proof}
  Let $U:B\to\Open$.
  The assumtion on $f$ can be written as $(y:B)\to \neg\neg \| (x:A)\times f(x)=y \|$.
  Then, by $\neg\neg$-stability of opens and our assumtion:
  \begin{align*}
    (y:B)\to U(x) &= (y:B)\to \neg\neg \| U(y) \| \\
                  &= (x:A)\to \neg\neg \| U(f(x)) \| \\
                  &= (x:A)\to U(f(x))
  \end{align*}
  Where the latter is open by the assumption that $A$ is compact.
\end{proof}

\begin{corollary}
  \label{image-compact}
  Let $f:A\to B$, then the image of any compact subtype of $A$ is compact.
\end{corollary}

\begin{proposition}
  $\A^1$ is not compact.
\end{proposition}

\begin{proof}
  Assume $\A^1$ is compact.
  For $a:R$, $x:\A^1$, let $U_a(x)\colonequiv (1+ax \neq 0)$.
  Note that $(x:\A^1)\to U_a(x)$ is equivalent to $\neg(\text{$a$ invertible})=\neg\neg(a=0)$.
  So by assumed compactness of $\A^1$, the proposition $\neg\neg(a=0)$ is open,
  and therefore the formal disk $\D\colonequiv \{x:R\mid \neg\neg(x=0)\}$ is open.

  To see this, assume $\D$ is open and note $\D\cap (\A^1\setminus\{0\})=\emptyset$.
  $\A^1\setminus\{0\}\subseteq \A^1$ is dense, so $\D=\emptyset$, which contradicts $0\in\D$.
\end{proof}

So also any type $Y$ that admits a surjection to $\A^1$ is not compact, which includes all $\A^n$ for $n>0$.
